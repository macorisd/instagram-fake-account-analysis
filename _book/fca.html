<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Proyecto de análisis de cuentas falsas en Instagram - 4&nbsp; Formal Concept Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./regresion.html" rel="next">
<link href="./reglas_asociacion.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./fca.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Formal Concept Analysis</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Proyecto de análisis de cuentas falsas en Instagram</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Importación del dataset y Análisis Exploratorio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualizacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Visualización</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reglas_asociacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reglas de Asociación</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fca.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Formal Concept Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regresion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Regresión</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Conclusión</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#formal-concept-analysis" id="toc-formal-concept-analysis" class="nav-link active" data-scroll-target="#formal-concept-analysis"><span class="header-section-number">4.1</span> Formal Concept Analysis</a>
  <ul class="collapse">
  <li><a href="#obtención-de-las-reglas-de-fca" id="toc-obtención-de-las-reglas-de-fca" class="nav-link" data-scroll-target="#obtención-de-las-reglas-de-fca"><span class="header-section-number">4.1.1</span> Obtención de las reglas de FCA</a></li>
  <li><a href="#predicción" id="toc-predicción" class="nav-link" data-scroll-target="#predicción"><span class="header-section-number">4.1.2</span> Predicción</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Formal Concept Analysis</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Librerías, datasets y procesamiento previo</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fcaR)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"train.csv"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datos)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>datos_test <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"test.csv"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datos_test)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">rename</span>(datos, <span class="at">profile_pic=</span><span class="st">`</span><span class="at">profile pic</span><span class="st">`</span>, <span class="st">`</span><span class="at">nums/length_username</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">nums/length username</span><span class="st">`</span>, <span class="at">fullname_words=</span><span class="st">`</span><span class="at">fullname words</span><span class="st">`</span>, <span class="st">`</span><span class="at">nums/length_fullname</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">nums/length fullname</span><span class="st">`</span>, <span class="at">description_length=</span><span class="st">`</span><span class="at">description length</span><span class="st">`</span>, <span class="at">external_URL=</span><span class="st">`</span><span class="at">external URL</span><span class="st">`</span>, <span class="at">posts=</span><span class="st">`</span><span class="at">#posts</span><span class="st">`</span>, <span class="at">followers=</span><span class="st">`</span><span class="at">#followers</span><span class="st">`</span>, <span class="at">follows=</span><span class="st">`</span><span class="at">#follows</span><span class="st">`</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>datos_test <span class="ot">&lt;-</span> <span class="fu">rename</span>(datos_test, <span class="at">profile_pic=</span><span class="st">`</span><span class="at">profile pic</span><span class="st">`</span>, <span class="st">`</span><span class="at">nums/length_username</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">nums/length username</span><span class="st">`</span>, <span class="at">fullname_words=</span><span class="st">`</span><span class="at">fullname words</span><span class="st">`</span>, <span class="st">`</span><span class="at">nums/length_fullname</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">nums/length fullname</span><span class="st">`</span>, <span class="at">description_length=</span><span class="st">`</span><span class="at">description length</span><span class="st">`</span>, <span class="at">external_URL=</span><span class="st">`</span><span class="at">external URL</span><span class="st">`</span>, <span class="at">posts=</span><span class="st">`</span><span class="at">#posts</span><span class="st">`</span>, <span class="at">followers=</span><span class="st">`</span><span class="at">#followers</span><span class="st">`</span>, <span class="at">follows=</span><span class="st">`</span><span class="at">#follows</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="formal-concept-analysis" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="formal-concept-analysis"><span class="header-section-number">4.1</span> Formal Concept Analysis</h2>
<p>Ya hemos extraído información importante sobre patrones encontrados en los datos, concretamente sobre qué atributos o combinaciones de ellos determinan, con mayor o menor influencia, si una cuenta es legítima o falsa. Sin embargo, el estudio de reglas de asociación no es la única forma de extraer información en cuanto a las relaciones entre variables y el descubrimiento de patrones: es momento de estudiar lo que se conoce como “Formal Concept Analysis”.</p>
<section id="obtención-de-las-reglas-de-fca" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="obtención-de-las-reglas-de-fca"><span class="header-section-number">4.1.1</span> Obtención de las reglas de FCA</h3>
<p>Mi primer paso para trabajar con FCA va a consistir en construir una matriz, cuyas filas serán las cuentas del dataset, cuyas columnas serán los valores discretizados de las variables (2 columnas por cada variable binaria y 3 por cada variable numérica) y cuyas celdas serán valores 0/1, en función del valor discretizado que cumpla esa cuenta para cada variable. Es decir, trabajaremos con un formal context binario.</p>
<p>Para comenzar con esta aproximación, antes es necesario ajustar un poco los intervalos de las variables numéricas que hemos visto en reglas de asociación, para que haya 3 categorías (serán high, med y low). En las variables binarias seguimos el mismo procedimiento que en reglas de asociación.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_intervalos <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(datos)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datosDF_FCA_intervalos)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Discretizar columnas numéricas</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_intervalos<span class="sc">$</span>nums.length_username <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF_FCA_intervalos<span class="sc">$</span>nums.length_username, <span class="at">method=</span><span class="st">"interval"</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_intervalos<span class="sc">$</span>fullname_words <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF_FCA_intervalos<span class="sc">$</span>fullname_words, <span class="at">method=</span><span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_intervalos<span class="sc">$</span>nums.length_fullname <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF_FCA_intervalos<span class="sc">$</span>nums.length_fullname, <span class="at">method=</span><span class="st">"interval"</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_intervalos<span class="sc">$</span>description_length <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF_FCA_intervalos<span class="sc">$</span>description_length, <span class="at">method=</span><span class="st">"interval"</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_intervalos<span class="sc">$</span>posts <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF_FCA_intervalos<span class="sc">$</span>posts, <span class="at">method=</span><span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_intervalos<span class="sc">$</span>followers <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF_FCA_intervalos<span class="sc">$</span>followers, <span class="at">method=</span><span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_intervalos<span class="sc">$</span>follows <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF_FCA_intervalos<span class="sc">$</span>follows, <span class="at">method=</span><span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">3</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificar las columnas binarias y numéricas</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>columnas_binarias <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">12</span>) <span class="co"># Índices de las columnas binarias</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir columnas binarias a factores</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_intervalos[, columnas_binarias] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(datosDF_FCA_intervalos[, columnas_binarias], factor)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datosDF_FCA_intervalos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ya tenemos los nuevos intervalos ajustados. Ahora toca imprimir los valores de esos intervalos, que usaremos posteriormente para definir los valores de cada cuenta en la matriz:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener los niveles de cada variable recorriendo las columnas</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (col_name <span class="cf">in</span> <span class="fu">names</span>(datosDF_FCA_intervalos)) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  col <span class="ot">&lt;-</span> datosDF_FCA_intervalos[[col_name]]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.factor</span>(col)) {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">length</span>(<span class="fu">levels</span>(col)), <span class="st">" niveles en"</span>, col_name, <span class="st">":"</span>, <span class="fu">levels</span>(col), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2  niveles en profile_pic : 0 1 
3  niveles en nums.length_username : [0,0.307) [0.307,0.613) [0.613,0.92] 
3  niveles en fullname_words : [0,1) [1,2) [2,12] 
3  niveles en nums.length_fullname : [0,0.333) [0.333,0.667) [0.667,1] 
2  niveles en name..username : 0 1 
3  niveles en description_length : [0,50) [50,100) [100,150] 
2  niveles en external_URL : 0 1 
2  niveles en private : 0 1 
3  niveles en posts : [0,2) [2,43.3) [43.3,7.39e+03] 
3  niveles en followers : [0,54.3) [54.3,415) [415,1.53e+07] 
3  niveles en follows : [0,89.3) [89.3,432) [432,7.5e+03] 
2  niveles en fake : 0 1 </code></pre>
</div>
</div>
<p>Ahora ya tenemos los valores posibles que puede tomar cada variable. En las variables binarias, naturalmente los valores posibles son 0 y 1; en las numéricas hay 3 intervalos por variable.</p>
<p>Lo siguiente sería definir los atributos (categorías de las variables):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>datosDF_FCA <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(datos)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datosDF_FCA)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un vector con los nombres de los atributos (categorías)</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>attributes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"profile_pic"</span>, <span class="st">"no_profile_pic"</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">"nums_lun_high"</span>, <span class="st">"nums_lun_med"</span>, <span class="st">"nums_lun_low"</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                <span class="st">"fn_words_high"</span>, <span class="st">"fn_words_med"</span>, <span class="st">"fn_words_low"</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>                <span class="st">"nums_lfn_high"</span>, <span class="st">"nums_lfn_med"</span>, <span class="st">"nums_lfn_low"</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>                <span class="st">"fn_equals_un"</span>, <span class="st">"fn_notequals_un"</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">"desc_length_high"</span>, <span class="st">"desc_length_med"</span>, <span class="st">"desc_length_low"</span>,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                <span class="st">"url"</span>, <span class="st">"no_url"</span>,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                <span class="st">"private"</span>, <span class="st">"public"</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                <span class="st">"posts_high"</span>, <span class="st">"posts_med"</span>, <span class="st">"posts_low"</span>,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">"followers_high"</span>, <span class="st">"followers_med"</span>, <span class="st">"followers_low"</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                <span class="st">"follows_high"</span>, <span class="st">"follows_med"</span>, <span class="st">"follows_low"</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                <span class="st">"fake"</span>, <span class="st">"real"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Una vez tenemos definidos los atributos, es hora de crear el esqueleto de la matriz sobre la que aplicaremos FCA:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un vector con los nombres de las cuentas</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>accounts <span class="ot">&lt;-</span> <span class="fu">rownames</span>(datosDF_FCA)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una matriz de ceros con el mismo número de filas que cuentas y el mismo número de columnas que atributos</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>datosFCA <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="fu">nrow</span>(datosDF_FCA), <span class="at">ncol =</span> <span class="fu">length</span>(attributes))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombrar las filas y columnas</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(datosFCA) <span class="ot">&lt;-</span> accounts</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(datosFCA) <span class="ot">&lt;-</span> attributes</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar la matriz vacía</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">#datosFCA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nuestra matriz vacía está lista. Ahora debemos llenarla, y para ello recorreremos cada fila del data frame, y examinaremos los valores de las columnas de esa fila. En función del valor que tome (comparado con los intervalos ajustados de antes), asignaremos un 1 o un 0 en la columna (categoría) correspondiente de la matriz para esa fila:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterar sobre cada fila del dataset y actualizar los valores en la matriz de acuerdo a los intervalos de las variables</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(datosDF_FCA)) {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># profile_pic</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"profile_pic"</span>] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"profile_pic"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"no_profile_pic"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># nums.length_username</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"nums.length_username"</span>] <span class="sc">&lt;</span> <span class="fl">0.307</span>) {</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"nums_lun_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"nums.length_username"</span>] <span class="sc">&lt;</span> <span class="fl">0.613</span>) {</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"nums_lun_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"nums_lun_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fullname_words</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"fullname_words"</span>] <span class="sc">&lt;</span> <span class="dv">1</span>) {</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"fn_words_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"fullname_words"</span>] <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"fn_words_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"fn_words_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># nums.length_fullname</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"nums.length_fullname"</span>] <span class="sc">&lt;</span> <span class="fl">0.333</span>) {</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"nums_lfn_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"nums.length_fullname"</span>] <span class="sc">&lt;</span> <span class="fl">0.667</span>) {</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"nums_lfn_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"nums_lfn_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Name.equals.username</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"name..username"</span>] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"fn_equals_un"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"fn_notequals_un"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># description_length</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"description_length"</span>] <span class="sc">&lt;</span> <span class="dv">50</span>) {</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"desc_length_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"description_length"</span>] <span class="sc">&lt;</span> <span class="dv">100</span>) {</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"desc_length_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"desc_length_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># external_URL</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"external_URL"</span>] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"url"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"no_url"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># private</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"private"</span>] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"private"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"public"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># posts</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"posts"</span>] <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"posts_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"posts"</span>] <span class="sc">&lt;</span> <span class="fl">43.3</span>) {</span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"posts_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"posts_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>  <span class="co"># followers</span></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="fl">54.3</span>) {</span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"followers_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">415</span>) {</span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"followers_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"followers_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>  <span class="co"># follows</span></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="fl">89.3</span>) {</span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"follows_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="dv">432</span>) {</span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"follows_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"follows_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fake</span></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA[i, <span class="st">"fake"</span>] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"fake"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>    datosFCA[i, <span class="st">"real"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar la matriz llena</span></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a><span class="co">#datosFCA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora viene lo interesante: convertir la matriz a un objeto formalcontext y trabajar con FCA.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir la matriz a un objeto FormalContext</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>fc_datos <span class="ot">&lt;-</span> FormalContext<span class="sc">$</span><span class="fu">new</span>(datosFCA)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>fc_datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>FormalContext with 576 objects and 31 attributes.
    profile_pic  no_profile_pic  nums_lun_high  nums_lun_med  nums_lun_low  
  1      X                                                          X       
  2      X                                                          X       
  3      X                                                          X       
  4      X                                                          X       
  5      X                                                          X       
  6      X                                                          X       
  7      X                                                          X       
  8      X                                                          X       
  9      X                                                          X       
 10      X                                                          X       
Other attributes are: fn_words_high, fn_words_med, fn_words_low, nums_lfn_high,
nums_lfn_med, nums_lfn_low, ... </code></pre>
</div>
</div>
<p>Vemos que la conversión ha sido exitosa. Además de ver la tabla, podemos hacer un plot para visualizar el resultado:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar el formal context</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>fc_datos<span class="sc">$</span><span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="fca_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Naturalmente, al ser tantos datos, no podemos ver bien cada fila. Sin embargo, podemos ver patrones que concuerdan con nuestro dataset: la última columna es ‘fake’, y sabemos que la primera mitad de filas son cuentas reales, y la segunda mitad, cuentas falsas, tal y como indican las barras negras del final del plot.</p>
<p>Observemos más de cerca el plot (5 primeras filas):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fc_datos[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]<span class="sc">$</span><span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="fca_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Como vemos, las barras negras concuerdan perfectamente con nuestro dataset. Parece que hemos tenido éxito. También podemos comprobar este éxito usando el extent y el intent:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>S1 <span class="ot">&lt;-</span> Set<span class="sc">$</span><span class="fu">new</span>(fc_datos<span class="sc">$</span>attributes)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>S1<span class="sc">$</span><span class="fu">assign</span>(<span class="at">fake=</span><span class="dv">1</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extent (filas) de las cuentas fake</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>S2 <span class="ot">&lt;-</span> fc_datos<span class="sc">$</span><span class="fu">extent</span>(S1)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>S2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304,
  305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319,
  320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334,
  335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349,
  350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364,
  365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379,
  380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394,
  395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409,
  410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424,
  425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439,
  440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454,
  455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469,
  470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484,
  485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499,
  500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514,
  515, 516, 517, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 529,
  530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 544,
  545, 546, 547, 548, 549, 550, 551, 552, 553, 554, 555, 556, 557, 558, 559,
  560, 561, 562, 563, 564, 565, 566, 567, 568, 569, 570, 571, 572, 573, 574,
  575, 576}</code></pre>
</div>
</div>
<p>El extent lista los nombres de las filas con cuentas que cumplen las condiciones establecidas en S1 (las cuentas son fake). Echando un vistazo al dataset, comprobamos que las filas de la salida (289-576) son las cuentas fake. También existe el concepto de intent, el cual devuelve el conjunto de características que comparte un conjunto de filas. Por esa lógica, si hiciéramos el intent de S2 (cuentas fake), debería devolvernos fake y no_url, dado que ninguna cuenta fake tiene URL externa:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Intent (características) de las cuentas fake</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>fc_datos<span class="sc">$</span><span class="fu">intent</span>(S2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{no_url, fake}</code></pre>
</div>
</div>
<p>Una vez más, parece que ha habido éxito.</p>
<p>Ahora es momento de encontrar las implicaciones:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Encontrar implicaciones</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>fc_datos<span class="sc">$</span><span class="fu">find_implications</span>()</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Número de implicaciones encontradas</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>fc_datos<span class="sc">$</span>implications<span class="sc">$</span><span class="fu">cardinality</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1292</code></pre>
</div>
</div>
<p>Ahora que sabemos que hay un número considerable de implicaciones, intentemos reducir la cantidad eliminando redundancias:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>fc_datos<span class="sc">$</span>implications<span class="sc">$</span><span class="fu">apply_rules</span>(<span class="at">rules =</span> <span class="fu">c</span>(<span class="st">"composition"</span>,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">"generalization"</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="st">"simplification"</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">parallelize =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Processing batch</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--&gt; Composition: from 1292 to 1292.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--&gt; Generalization: from 1292 to 1292.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>--&gt; Simplification: from 1292 to 1292.</code></pre>
</div>
</div>
<p>Parece que ninguna de las implicaciones originales era redundante. Echemos un vistazo a las primeras 20 implicaciones:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>fc_datos<span class="sc">$</span>implications[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Implication set with 20 implications.
Rule 1: {real} -&gt; {nums_lfn_low}
Rule 2: {fake} -&gt; {no_url}
Rule 3: {follows_med, follows_low} -&gt; {profile_pic, no_profile_pic,
  nums_lun_high, nums_lun_med, nums_lun_low, fn_words_high, fn_words_med,
  fn_words_low, nums_lfn_high, nums_lfn_med, nums_lfn_low, fn_equals_un,
  fn_notequals_un, desc_length_high, desc_length_med, desc_length_low, url,
  no_url, private, public, posts_high, posts_med, posts_low, followers_high,
  followers_med, followers_low, follows_high, fake, real}
Rule 4: {follows_high, follows_low} -&gt; {profile_pic, no_profile_pic,
  nums_lun_high, nums_lun_med, nums_lun_low, fn_words_high, fn_words_med,
  fn_words_low, nums_lfn_high, nums_lfn_med, nums_lfn_low, fn_equals_un,
  fn_notequals_un, desc_length_high, desc_length_med, desc_length_low, url,
  no_url, private, public, posts_high, posts_med, posts_low, followers_high,
  followers_med, followers_low, follows_med, fake, real}
Rule 5: {follows_high, follows_med} -&gt; {profile_pic, no_profile_pic,
  nums_lun_high, nums_lun_med, nums_lun_low, fn_words_high, fn_words_med,
  fn_words_low, nums_lfn_high, nums_lfn_med, nums_lfn_low, fn_equals_un,
  fn_notequals_un, desc_length_high, desc_length_med, desc_length_low, url,
  no_url, private, public, posts_high, posts_med, posts_low, followers_high,
  followers_med, followers_low, follows_low, fake, real}
Rule 6: {followers_low} -&gt; {no_url}
Rule 7: {followers_med, follows_low} -&gt; {nums_lfn_low, desc_length_low}
Rule 8: {followers_med, follows_high} -&gt; {fn_notequals_un}
Rule 9: {followers_high} -&gt; {nums_lfn_low}
Rule 10: {posts_low} -&gt; {no_url}
Rule 11: {posts_high} -&gt; {fn_notequals_un}
Rule 12: {public, followers_med, follows_med} -&gt; {fn_notequals_un}
Rule 13: {public, posts_med, follows_high} -&gt; {fn_notequals_un}
Rule 14: {private, posts_med, follows_low} -&gt; {nums_lfn_low}
Rule 15: {private, public} -&gt; {profile_pic, no_profile_pic, nums_lun_high,
  nums_lun_med, nums_lun_low, fn_words_high, fn_words_med, fn_words_low,
  nums_lfn_high, nums_lfn_med, nums_lfn_low, fn_equals_un, fn_notequals_un,
  desc_length_high, desc_length_med, desc_length_low, url, no_url, posts_high,
  posts_med, posts_low, followers_high, followers_med, followers_low,
  follows_high, follows_med, follows_low, fake, real}
Rule 16: {followers_low, follows_med} -&gt; {fake}
Rule 17: {followers_low, follows_high} -&gt; {fn_words_med, desc_length_low, fake}
Rule 18: {followers_med, followers_low} -&gt; {profile_pic, no_profile_pic,
  nums_lun_high, nums_lun_med, nums_lun_low, fn_words_high, fn_words_med,
  fn_words_low, nums_lfn_high, nums_lfn_med, nums_lfn_low, fn_equals_un,
  fn_notequals_un, desc_length_high, desc_length_med, desc_length_low,
  url, private, public, posts_high, posts_med, posts_low, followers_high,
  follows_high, follows_med, follows_low, fake, real}
Rule 19: {posts_low, follows_med} -&gt; {nums_lfn_low, desc_length_low}
Rule 20: {posts_low, follows_high} -&gt; {desc_length_low}</code></pre>
</div>
</div>
<p>Ahora es el momento de extraer conocimiento con las implicaciones que nos interesan (variable fake en el consecuente de la regla).</p>
<p>Comencemos con las reglas cuyo consecuente es únicamente ‘fake’ (si además de fake se dejan otras variables, el resultado tiene mucho ruido y reglas extrañas):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Implicaciones con 'fake' en el consecuente</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>fc_datos<span class="sc">$</span>implications<span class="sc">$</span><span class="fu">filter</span>(<span class="at">rhs =</span> <span class="st">"fake"</span>, <span class="at">not_rhs =</span> attributes[<span class="sc">-</span><span class="fu">which</span>(attributes <span class="sc">==</span> <span class="st">"fake"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Implication set with 31 implications.
Rule 1: {followers_low, follows_med} -&gt; {fake}
Rule 2: {public, posts_low, follows_high} -&gt; {fake}
Rule 3: {public, posts_low, followers_low} -&gt; {fake}
Rule 4: {fn_words_low, followers_low} -&gt; {fake}
Rule 5: {fn_words_low, private, posts_low} -&gt; {fake}
Rule 6: {fn_words_low, posts_low, follows_med} -&gt; {fake}
Rule 7: {fn_words_med, public, followers_low} -&gt; {fake}
Rule 8: {fn_words_med, public, posts_med, follows_low} -&gt; {fake}
Rule 9: {fn_words_med, posts_low, followers_low} -&gt; {fake}
Rule 10: {fn_words_med, private, posts_low, follows_low} -&gt; {fake}
Rule 11: {fn_equals_un, no_url} -&gt; {fake}
Rule 12: {fn_words_med, private, posts_low, follows_med} -&gt; {fake}
Rule 13: {fn_words_high, desc_length_low, public, followers_med, follows_high}
  -&gt; {fake}
Rule 14: {fn_words_high, public, posts_low, follows_med} -&gt; {fake}
Rule 15: {nums_lun_low, fn_words_med, posts_med, followers_med, follows_high} -&gt;
  {fake}
Rule 16: {nums_lun_med, desc_length_low, public, follows_med} -&gt; {fake}
Rule 17: {nums_lun_med, desc_length_low, public, followers_med} -&gt; {fake}
Rule 18: {nums_lun_med, fn_words_med, public, posts_med} -&gt; {fake}
Rule 19: {nums_lun_med, fn_words_high, desc_length_low, follows_med} -&gt; {fake}
Rule 20: {nums_lun_med, fn_words_high, desc_length_low, followers_med} -&gt; {fake}
Rule 21: {no_profile_pic, follows_low} -&gt; {fake}
Rule 22: {no_profile_pic, followers_low} -&gt; {fake}
Rule 23: {no_profile_pic, followers_med, follows_high} -&gt; {fake}
Rule 24: {no_profile_pic, fn_words_low, follows_med} -&gt; {fake}
Rule 25: {no_profile_pic, fn_words_low, desc_length_low, posts_med} -&gt; {fake}
Rule 26: {no_profile_pic, fn_words_med, follows_high} -&gt; {fake}
Rule 27: {no_profile_pic, fn_words_high, desc_length_low} -&gt; {fake}
Rule 28: {fn_words_med, private, posts_high, followers_med, follows_high} -&gt;
  {fake}
Rule 29: {fn_words_high, desc_length_high, no_url, posts_med, followers_high,
  follows_med} -&gt; {fake}
Rule 30: {desc_length_high, no_url, public, posts_high, followers_med,
  follows_med} -&gt; {fake}
Rule 31: {nums_lun_med, fn_words_high, desc_length_low, posts_high,
  followers_high} -&gt; {fake}</code></pre>
</div>
</div>
<p>Basándonos en estas reglas, podemos considerar que una cuenta es falsa cuando identificamos ciertas combinaciones de estas características:</p>
<ul>
<li>Pocas o nulas publicaciones (igual que en reglas de asociación)</li>
<li>Descripción vacía o muy breve (igual que en reglas de asociación)</li>
<li>Ausencia de foto de perfil (igual que en reglas de asociación)</li>
<li>Pocos o nulos seguidos (igual que en reglas de asociación)</li>
<li>Ausencia de URL externa (igual que en reglas de asociación)</li>
<li>Bajo número de seguidores</li>
</ul>
<p>Como vemos, las conclusiones generales son muy similares a las obtenidas con arules.</p>
<p>Ahora veamos los antecedentes para cuentas verdaderas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Implicaciones con 'real' en el consecuente</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>fc_datos<span class="sc">$</span>implications<span class="sc">$</span><span class="fu">filter</span>(<span class="at">rhs =</span> <span class="st">"real"</span>, <span class="at">not_rhs =</span> attributes[<span class="sc">-</span><span class="fu">which</span>(attributes <span class="sc">==</span> <span class="st">"real"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Implication set with 39 implications.
Rule 1: {nums_lun_low, fn_words_low, private, posts_high} -&gt; {real}
Rule 2: {no_profile_pic, nums_lun_low, fn_words_med, private, followers_med,
  follows_med} -&gt; {real}
Rule 3: {desc_length_med, followers_med, follows_med} -&gt; {real}
Rule 4: {profile_pic, desc_length_med, posts_high} -&gt; {real}
Rule 5: {desc_length_med, public, follows_med} -&gt; {real}
Rule 6: {desc_length_high, posts_high, follows_high} -&gt; {real}
Rule 7: {desc_length_high, posts_high, followers_high} -&gt; {real}
Rule 8: {profile_pic, fn_words_low, posts_med, follows_med} -&gt; {real}
Rule 9: {profile_pic, fn_words_med, public, followers_high} -&gt; {real}
Rule 10: {fn_words_med, public, posts_high, follows_high} -&gt; {real}
Rule 11: {fn_words_med, desc_length_high} -&gt; {real}
Rule 12: {profile_pic, fn_words_high, desc_length_med} -&gt; {real}
Rule 13: {posts_high, followers_high, follows_med} -&gt; {real}
Rule 14: {nums_lun_low, public, posts_high, followers_high} -&gt; {real}
Rule 15: {private, followers_high, follows_med} -&gt; {real}
Rule 16: {nums_lun_low, private, posts_high, followers_med, follows_med} -&gt;
  {real}
Rule 17: {desc_length_low, followers_high, follows_med} -&gt; {real}
Rule 18: {desc_length_low, public, posts_high, follows_med} -&gt; {real}
Rule 19: {nums_lun_low, desc_length_low, posts_high, followers_med, follows_med}
  -&gt; {real}
Rule 20: {nums_lun_low, desc_length_med, followers_high} -&gt; {real}
Rule 21: {nums_lun_low, desc_length_med, private, follows_high} -&gt; {real}
Rule 22: {desc_length_high, private, follows_med} -&gt; {real}
Rule 23: {desc_length_high, private, posts_high} -&gt; {real}
Rule 24: {profile_pic, nums_lun_low, fn_words_low, public, follows_med} -&gt;
  {real}
Rule 25: {nums_lun_low, fn_words_low, posts_high, follows_med} -&gt; {real}
Rule 26: {profile_pic, nums_lun_low, fn_words_low, desc_length_med} -&gt; {real}
Rule 27: {fn_words_med, followers_high, follows_med} -&gt; {real}
Rule 28: {nums_lun_low, fn_words_med, posts_high, followers_med, follows_med} -&gt;
  {real}
Rule 29: {nums_lun_low, fn_words_med, public, posts_high} -&gt; {real}
Rule 30: {profile_pic, fn_words_med, public, posts_low, followers_med,
  follows_med} -&gt; {real}
Rule 31: {profile_pic, nums_lun_low, private, posts_low, follows_high} -&gt; {real}
Rule 32: {nums_lun_low, fn_words_high, posts_high, followers_high} -&gt; {real}
Rule 33: {fn_words_high, private, posts_high, followers_med} -&gt; {real}
Rule 34: {profile_pic, fn_words_high, private, follows_low} -&gt; {real}
Rule 35: {nums_lun_low, fn_words_high, posts_med, followers_low, follows_low} -&gt;
  {real}
Rule 36: {profile_pic, fn_words_high, posts_low, followers_med, follows_low} -&gt;
  {real}
Rule 37: {profile_pic, fn_words_high, private, posts_low} -&gt; {real}
Rule 38: {fn_words_high, desc_length_high, private} -&gt; {real}
Rule 39: {profile_pic, nums_lun_med, fn_words_med, private, posts_med,
  follows_high} -&gt; {real}</code></pre>
</div>
</div>
<p>Basándonos en estas reglas, podemos considerar que una cuenta es verdadera cuando identificamos ciertas combinaciones de estas características:</p>
<ul>
<li>Ratio de números en la longitud del username bajo (igual que en reglas de asociación)</li>
<li>Cantidad considerable de palabras en el nombre completo (igual que en reglas de asociación)</li>
<li>Presencia de foto de perfil (igual que en reglas de asociación)</li>
<li>Descripción detallada (igual que en reglas de asociación)</li>
<li>Número alto de publicaciones (igual que en reglas de asociación)</li>
<li>Número considerable de seguidores (ya comentamos que este parámetro faltó en reglas de asociación, pero aquí sí aparece)</li>
</ul>
<p>Las conclusiones generales para cuentas verdaderas también son muy similares a las obtenidas con arules.</p>
</section>
<section id="predicción" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="predicción"><span class="header-section-number">4.1.2</span> Predicción</h3>
<p>Ahora es el momento de usar las reglas obtenidas para predecir la veracidad de las cuentas en el dataset de test. Para ello, debemos organizar los datos de test de la misma forma que los de entrenamiento. Como me ha gustado el modo de trabajar con el formato de reglas de arules, primero convertiré las reglas obtenidas a arules para poder aplicarlas a los datos de test.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir las implicaciones a reglas de asociación</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>reglas_FCA <span class="ot">&lt;-</span> fc_datos<span class="sc">$</span>implications<span class="sc">$</span><span class="fu">to_arules</span>()</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la primera regla obtenida</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_FCA[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs       rhs            support confidence lift     count addedValue boost
[1] {real} =&gt; {nums_lfn_low} 0.5     1          1.041591 288   0.03993056 Inf  
    casualConfidence casualSupport centeredConfidence certainty chiSquared
[1] 1                1.460069      0.03993056         1         23.9566   
    collectiveStrength confirmedConfidence conviction cosine    counterexample
[1] 25.98511           1                   Inf        0.7216617 1             
    coverage doc        fishersExactTest gini        hyperConfidence hyperLift
[1] 0.5      0.07986111 7.546462e-08     0.003188899 0.9999999       1.021277 
    imbalance implicationIndex importance improvement jaccard   jMeasure
[1] 0.4792043 -3.391165        0.03601621 1           0.5207957 NaN     
    kappa      kulczynski lambda laplace   leastContradiction lerman   
[1] 0.07986111 0.7603978  0      0.9965517 0.5207957          0.6915925
    leverage   LIC maxconfidence mutualInformation oddsRatio phi      
[1] 0.01996528 Inf 1             NaN               Inf       0.2039395
    ralambondrainy relativeRisk rhsSupport RLD rulePowerFactor sebag stdLift
[1] 0              1.086792     0.9600694  1   0.5             Inf   1      
    table.n11 table.n01 table.n10 table.n00 varyingLiaison yuleQ yuleY
[1] 288       265       0         23        0.04159132     NaN   NaN  </code></pre>
</div>
</div>
<p>Mostremos el número de reglas obtenidas, que debería ser 1292:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Número de reglas obtenidas</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas_FCA)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1292</code></pre>
</div>
</div>
<p>Parece que las reglas se han convertido con éxito a formato arules.</p>
<p>Ahora, debemos crear una matriz de datos de test con las mismas características que la matriz de datos de entrenamiento:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un vector con los nombres de las cuentas</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>accounts <span class="ot">&lt;-</span> <span class="fu">rownames</span>(datos_test)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear lista con atributos para las filas de test (sin real ni fake)</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>attributes_test <span class="ot">&lt;-</span> attributes[<span class="sc">-</span><span class="fu">which</span>(attributes <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"fake"</span>, <span class="st">"real"</span>))]</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una matriz de ceros con el mismo número de filas que cuentas y el mismo número de columnas que atributos</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>datosFCA_test <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="fu">nrow</span>(datos_test), <span class="at">ncol =</span> <span class="fu">length</span>(attributes_test))</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombrar las filas y columnas</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(datosFCA_test) <span class="ot">&lt;-</span> accounts</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(datosFCA_test) <span class="ot">&lt;-</span> attributes_test</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar la matriz vacía</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co">#datosFCA_test</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora, debemos llenar la matriz de datos de test con los valores correspondientes a cada cuenta, fijándonos en los intervalos generados para las cuentas de entrenamiento:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>datosDF_FCA_test <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(datos_test)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterar sobre cada fila del dataset y actualizar los valores en la matriz de acuerdo a los intervalos de las variables</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(datosDF_FCA_test)) {</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># profile_pic</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"profile_pic"</span>] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"profile_pic"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"no_profile_pic"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># nums.length_username</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"nums.length_username"</span>] <span class="sc">&lt;</span> <span class="fl">0.307</span>) {</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"nums_lun_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"nums.length_username"</span>] <span class="sc">&lt;</span> <span class="fl">0.613</span>) {</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"nums_lun_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"nums_lun_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fullname_words</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"fullname_words"</span>] <span class="sc">&lt;</span> <span class="dv">1</span>) {</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"fn_words_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"fullname_words"</span>] <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"fn_words_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"fn_words_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># nums.length_fullname</span></span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"nums.length_fullname"</span>] <span class="sc">&lt;</span> <span class="fl">0.333</span>) {</span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"nums_lfn_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"nums.length_fullname"</span>] <span class="sc">&lt;</span> <span class="fl">0.667</span>) {</span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"nums_lfn_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"nums_lfn_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Name.equals.username</span></span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"name..username"</span>] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"fn_equals_un"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"fn_notequals_un"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># description_length</span></span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"description_length"</span>] <span class="sc">&lt;</span> <span class="dv">50</span>) {</span>
<span id="cb34-48"><a href="#cb34-48" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"desc_length_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-49"><a href="#cb34-49" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"description_length"</span>] <span class="sc">&lt;</span> <span class="dv">100</span>) {</span>
<span id="cb34-50"><a href="#cb34-50" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"desc_length_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-51"><a href="#cb34-51" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-52"><a href="#cb34-52" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"desc_length_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-53"><a href="#cb34-53" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-54"><a href="#cb34-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-55"><a href="#cb34-55" aria-hidden="true" tabindex="-1"></a>  <span class="co"># external_URL</span></span>
<span id="cb34-56"><a href="#cb34-56" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"external_URL"</span>] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb34-57"><a href="#cb34-57" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"url"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-58"><a href="#cb34-58" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-59"><a href="#cb34-59" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"no_url"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-60"><a href="#cb34-60" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-61"><a href="#cb34-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-62"><a href="#cb34-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># private</span></span>
<span id="cb34-63"><a href="#cb34-63" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"private"</span>] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb34-64"><a href="#cb34-64" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"private"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-65"><a href="#cb34-65" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-66"><a href="#cb34-66" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"public"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-67"><a href="#cb34-67" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-68"><a href="#cb34-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-69"><a href="#cb34-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># posts</span></span>
<span id="cb34-70"><a href="#cb34-70" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"posts"</span>] <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb34-71"><a href="#cb34-71" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"posts_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-72"><a href="#cb34-72" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"posts"</span>] <span class="sc">&lt;</span> <span class="fl">43.3</span>) {</span>
<span id="cb34-73"><a href="#cb34-73" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"posts_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-74"><a href="#cb34-74" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-75"><a href="#cb34-75" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"posts_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-76"><a href="#cb34-76" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-77"><a href="#cb34-77" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-78"><a href="#cb34-78" aria-hidden="true" tabindex="-1"></a>  <span class="co"># followers</span></span>
<span id="cb34-79"><a href="#cb34-79" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="fl">54.3</span>) {</span>
<span id="cb34-80"><a href="#cb34-80" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"followers_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-81"><a href="#cb34-81" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">415</span>) {</span>
<span id="cb34-82"><a href="#cb34-82" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"followers_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-83"><a href="#cb34-83" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-84"><a href="#cb34-84" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"followers_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-85"><a href="#cb34-85" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-86"><a href="#cb34-86" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-87"><a href="#cb34-87" aria-hidden="true" tabindex="-1"></a>  <span class="co"># follows</span></span>
<span id="cb34-88"><a href="#cb34-88" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="fl">89.3</span>) {</span>
<span id="cb34-89"><a href="#cb34-89" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"follows_low"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-90"><a href="#cb34-90" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datosDF_FCA_test[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="dv">432</span>) {</span>
<span id="cb34-91"><a href="#cb34-91" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"follows_med"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-92"><a href="#cb34-92" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-93"><a href="#cb34-93" aria-hidden="true" tabindex="-1"></a>    datosFCA_test[i, <span class="st">"follows_high"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb34-94"><a href="#cb34-94" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-95"><a href="#cb34-95" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-96"><a href="#cb34-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-97"><a href="#cb34-97" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar la matriz llena</span></span>
<span id="cb34-98"><a href="#cb34-98" aria-hidden="true" tabindex="-1"></a><span class="co">#datosFCA_test</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ahora es momento de filtrar el gran número de reglas obtenidas, para quedarnos solo con las que contienen ‘fake’ o ‘real’ en el consecuente, empezando por las ‘fake’:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>reglas_FCA_fake <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas_FCA, <span class="at">subset =</span> rhs <span class="sc">%oin%</span> <span class="st">"fake"</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Desechar las reglas con count &lt; 15</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>reglas_FCA_fake <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas_FCA_fake, <span class="at">subset =</span> count <span class="sc">&gt;=</span> <span class="dv">15</span>)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_FCA_fake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                   rhs       support confidence lift count addedValue boost casualConfidence casualSupport centeredConfidence certainty chiSquared collectiveStrength confirmedConfidence conviction    cosine counterexample   coverage       doc fishersExactTest       gini hyperConfidence hyperLift imbalance implicationIndex importance improvement    jaccard jMeasure      kappa kulczynski     lambda   laplace leastContradiction   lerman   leverage LIC maxconfidence mutualInformation oddsRatio       phi ralambondrainy relativeRisk rhsSupport RLD rulePowerFactor sebag stdLift table.n11 table.n01 table.n10 table.n00 varyingLiaison yuleQ yuleY
[1]  {followers_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      follows_med}      =&gt; {fake} 0.06423611          1    2    37        0.5   Inf                1     0.5642361                0.5         1   39.53989           613.3101                   1        Inf 0.3584302              1 0.06423611 0.5343228     2.115216e-12 0.03432282       1.0000000  1.480000 0.8715278        -4.301163  0.3205157           1 0.12847222      NaN 0.12847222  0.5642361 0.12847222 0.9743590         0.12847222 4.301163 0.03211806 Inf             1               NaN       Inf 0.2620031              0     2.147410        0.5   1      0.06423611   Inf       1        37       251         0       288              1   NaN   NaN
[2]  {public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      posts_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_low}    =&gt; {fake} 0.15451389          1    2    89        0.5   Inf                1     0.6545139                0.5         1  105.26489           809.1431                   1        Inf 0.5559027              1 0.15451389 0.5913758     5.015407e-31 0.09137577       1.0000000  1.618182 0.6909722        -6.670832  0.3834800           1 0.30902778      NaN 0.30902778  0.6545139 0.30902778 0.9890110         0.30902778 6.670832 0.07725694 Inf             1               NaN       Inf 0.4274945              0     2.447236        0.5   1      0.15451389   Inf       1        89       199         0       288              1   NaN   NaN
[3]  {fn_words_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      followers_low}    =&gt; {fake} 0.03125000          1    2    18        0.5   Inf                1     0.5312500                0.5         1   18.58065           528.2006                   1        Inf 0.2500000              1 0.03125000 0.5161290     2.900458e-06 0.01612903       0.9999971  1.285714 0.9375000        -3.000000  0.2929423           1 0.06250000      NaN 0.06250000  0.5312500 0.06250000 0.9500000         0.06250000 3.000000 0.01562500 Inf             1               NaN       Inf 0.1796053              0     2.066667        0.5   1      0.03125000   Inf       1        18       270         0       288              1   NaN   NaN
[4]  {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      followers_low}    =&gt; {fake} 0.13715278          1    2    79        0.5   Inf                1     0.6371528                0.5         1   91.55734           767.2505                   1        Inf 0.5237419              1 0.13715278 0.5794769     3.294503e-27 0.07947686       1.0000000  1.612245 0.7256944        -6.284903  0.3704862           1 0.27430556      NaN 0.27430556  0.6371528 0.27430556 0.9876543         0.27430556 6.284903 0.06857639 Inf             1               NaN       Inf 0.3986900              0     2.377990        0.5   1      0.13715278   Inf       1        79       209         0       288              1   NaN   NaN
[5]  {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      posts_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      follows_low}      =&gt; {fake} 0.02777778          1    2    16        0.5   Inf                1     0.5277778                0.5         1   16.45714           515.0913                   1        Inf 0.2357023              1 0.02777778 0.5142857     1.231766e-05 0.01428571       0.9999877  1.333333 0.9444444        -2.828427  0.2887501           1 0.05555556      NaN 0.05555556  0.5277778 0.05555556 0.9444444         0.05555556 2.828427 0.01388889 Inf             1               NaN       Inf 0.1690309              0     2.058824        0.5   1      0.02777778   Inf       1        16       272         0       288              1   NaN   NaN
[6]  {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      posts_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_low}    =&gt; {fake} 0.17881944          1    2   103        0.5   Inf                1     0.6788194                0.5         1  125.42918           874.2635                   1        Inf 0.5980292              1 0.17881944 0.6088795     1.372490e-36 0.10887949       1.0000000  1.661290 0.6423611        -7.176350  0.4030247           1 0.35763889      NaN 0.35763889  0.6788194 0.35763889 0.9904762         0.35763889 7.176350 0.08940972 Inf             1               NaN       Inf 0.4666465              0     2.556757        0.5   1      0.17881944   Inf       1       103       185         0       288              1   NaN   NaN
[7]  {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      private,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
      posts_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      follows_low}      =&gt; {fake} 0.05034722          1    2    29        0.5   Inf                1     0.5503472                0.5         1   30.53748           582.2801                   1        Inf 0.3173239              1 0.05034722 0.5265082     8.870185e-10 0.02650823       1.0000000  1.380952 0.8993056        -3.807887  0.3103586           1 0.10069444      NaN 0.10069444  0.5503472 0.10069444 0.9677419         0.10069444 3.807887 0.02517361 Inf             1               NaN       Inf 0.2302530              0     2.111969        0.5   1      0.05034722   Inf       1        29       259         0       288              1   NaN   NaN
[8]  {fn_equals_un,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      no_url}           =&gt; {fake} 0.03298611          1    2    19        0.5   Inf                1     0.5329861                0.5         1   19.64811           534.1926                   1        Inf 0.2568506              1 0.03298611 0.5170557     1.403447e-06 0.01705566       0.9999986  1.357143 0.9340278        -3.082207  0.2948587           1 0.06597222      NaN 0.06597222  0.5329861 0.06597222 0.9523810         0.06597222 3.082207 0.01649306 Inf             1               NaN       Inf 0.1846925              0     2.070632        0.5   1      0.03298611   Inf       1        19       269         0       288              1   NaN   NaN
[9]  {nums_lun_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      desc_length_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      follows_med}      =&gt; {fake} 0.02951389          1    2    17        0.5   Inf                1     0.5295139                0.5         1   17.51699           521.8531                   1        Inf 0.2429563              1 0.02951389 0.5152057     5.982863e-06 0.01520572       0.9999940  1.307692 0.9409722        -2.915476  0.2909129           1 0.05902778      NaN 0.05902778  0.5295139 0.05902778 0.9473684         0.05902778 2.915476 0.01475694 Inf             1               NaN       Inf 0.1743888              0     2.062731        0.5   1      0.02951389   Inf       1        17       271         0       288              1   NaN   NaN
[10] {nums_lun_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      desc_length_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      followers_med}    =&gt; {fake} 0.05381944          1    2    31        0.5   Inf                1     0.5538194                0.5         1   32.76330           590.3937                   1        Inf 0.3280837              1 0.05381944 0.5284404     1.984596e-10 0.02844037       1.0000000  1.409091 0.8923611        -3.937004  0.3130037           1 0.10763889      NaN 0.10763889  0.5538194 0.10763889 0.9696970         0.10763889 3.937004 0.02690972 Inf             1               NaN       Inf 0.2384968              0     2.120623        0.5   1      0.05381944   Inf       1        31       257         0       288              1   NaN   NaN
[11] {nums_lun_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      posts_med}        =&gt; {fake} 0.04166667          1    2    24        0.5   Inf                1     0.5416667                0.5         1   25.04348           560.2747                   1        Inf 0.2886751              1 0.04166667 0.5217391     3.616297e-08 0.02173913       1.0000000  1.411765 0.9166667        -3.464102  0.3032306           1 0.08333333      NaN 0.08333333  0.5416667 0.08333333 0.9615385         0.08333333 3.464102 0.02083333 Inf             1               NaN       Inf 0.2085144              0     2.090909        0.5   1      0.04166667   Inf       1        24       264         0       288              1   NaN   NaN
[12] {no_profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      follows_low}      =&gt; {fake} 0.19965278          1    2   115        0.5   Inf                1     0.6996528                0.5         1  143.68764           937.6847                   1        Inf 0.6319063              1 0.19965278 0.6247289     1.406311e-41 0.12472885       1.0000000  1.666667 0.6006944        -7.582875  0.4213039           1 0.39930556      NaN 0.39930556  0.6996528 0.39930556 0.9914530         0.39930556 7.582875 0.09982639 Inf             1               NaN       Inf 0.4994574              0     2.664740        0.5   1      0.19965278   Inf       1       115       173         0       288              1   NaN   NaN
[13] {no_profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      followers_low}    =&gt; {fake} 0.22222222          1    2   128        0.5   Inf                1     0.7222222                0.5         1  164.57143          1016.5052                   1        Inf 0.6666667              1 0.22222222 0.6428571     3.076242e-47 0.14285714       1.0000000  1.684211 0.5555556        -8.000000  0.4430330           1 0.44444444      NaN 0.44444444  0.7222222 0.44444444 0.9923077         0.44444444 8.000000 0.11111111 Inf             1               NaN       Inf 0.5345225              0     2.800000        0.5   1      0.22222222   Inf       1       128       160         0       288              1   NaN   NaN
[14] {no_profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      follows_high}     =&gt; {fake} 0.03298611          1    2    19        0.5   Inf                1     0.5329861                0.5         1   19.64811           534.1926                   1        Inf 0.2568506              1 0.03298611 0.5170557     1.403447e-06 0.01705566       0.9999986  1.357143 0.9340278        -3.082207  0.2948587           1 0.06597222      NaN 0.06597222  0.5329861 0.06597222 0.9523810         0.06597222 3.082207 0.01649306 Inf             1               NaN       Inf 0.1846925              0     2.070632        0.5   1      0.03298611   Inf       1        19       269         0       288              1   NaN   NaN
[15] {no_profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      fn_words_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      desc_length_low}  =&gt; {fake} 0.05208333          1    2    30        0.5   Inf                1     0.5520833                0.5         1   31.64835           586.3752                   1        Inf 0.3227486              1 0.05208333 0.5274725     4.199960e-10 0.02747253       1.0000000  1.428571 0.8958333        -3.872983  0.3116925           1 0.10416667      NaN 0.10416667  0.5520833 0.10416667 0.9687500         0.10416667 3.872983 0.02604167 Inf             1               NaN       Inf 0.2344036              0     2.116279        0.5   1      0.05208333   Inf       1        30       258         0       288              1   NaN   NaN</code></pre>
</div>
</div>
<p>Como vemos, hay 15 reglas. Ahora, hagamos lo mismo con las reglas que contienen ‘real’ en el consecuente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>reglas_FCA_real <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas_FCA, <span class="at">subset =</span> rhs <span class="sc">%oin%</span> <span class="st">"real"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Desechar las reglas con count &lt; 15</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>reglas_FCA_real <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas_FCA_real, <span class="at">subset =</span> count <span class="sc">&gt;=</span> <span class="dv">15</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_FCA_real)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                    rhs       support confidence lift count addedValue boost casualConfidence casualSupport centeredConfidence certainty chiSquared collectiveStrength confirmedConfidence conviction    cosine counterexample   coverage       doc fishersExactTest       gini hyperConfidence hyperLift imbalance implicationIndex importance improvement    jaccard jMeasure      kappa kulczynski     lambda   laplace leastContradiction   lerman   leverage LIC maxconfidence mutualInformation oddsRatio       phi ralambondrainy relativeRisk rhsSupport RLD rulePowerFactor sebag stdLift table.n11 table.n01 table.n10 table.n00 varyingLiaison yuleQ yuleY
[1]  {profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
      desc_length_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      posts_high}        =&gt; {real} 0.07118056          1    2    41        0.5   Inf                1     0.5711806                0.5         1   44.14206           627.8511                   1        Inf 0.3773077              1 0.07118056 0.5383178     9.819951e-14 0.03831776       1.0000000  1.464286 0.8576389        -4.527693  0.3253034           1 0.14236111      NaN 0.14236111  0.5711806 0.14236111 0.9767442         0.14236111 4.527693 0.03559028 Inf             1               NaN       Inf 0.2768312              0     2.165992        0.5   1      0.07118056   Inf       1        41       247         0       288              1   NaN   NaN
[2]  {desc_length_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      follows_med}       =&gt; {real} 0.03125000          1    2    18        0.5   Inf                1     0.5312500                0.5         1   18.58065           528.2006                   1        Inf 0.2500000              1 0.03125000 0.5161290     2.900458e-06 0.01612903       0.9999971  1.285714 0.9375000        -3.000000  0.2929423           1 0.06250000      NaN 0.06250000  0.5312500 0.06250000 0.9500000         0.06250000 3.000000 0.01562500 Inf             1               NaN       Inf 0.1796053              0     2.066667        0.5   1      0.03125000   Inf       1        18       270         0       288              1   NaN   NaN
[3]  {desc_length_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      follows_high}      =&gt; {real} 0.02951389          1    2    17        0.5   Inf                1     0.5295139                0.5         1   17.51699           521.8531                   1        Inf 0.2429563              1 0.02951389 0.5152057     5.982863e-06 0.01520572       0.9999940  1.307692 0.9409722        -2.915476  0.2909129           1 0.05902778      NaN 0.05902778  0.5295139 0.05902778 0.9473684         0.05902778 2.915476 0.01475694 Inf             1               NaN       Inf 0.1743888              0     2.062731        0.5   1      0.02951389   Inf       1        17       271         0       288              1   NaN   NaN
[4]  {desc_length_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_high}    =&gt; {real} 0.03993056          1    2    23        0.5   Inf                1     0.5399306                0.5         1   23.95660           555.4687                   1        Inf 0.2825971              1 0.03993056 0.5207957     7.546462e-08 0.02079566       0.9999999  1.352941 0.9201389        -3.391165  0.3016826           1 0.07986111      NaN 0.07986111  0.5399306 0.07986111 0.9600000         0.07986111 3.391165 0.01996528 Inf             1               NaN       Inf 0.2039395              0     2.086792        0.5   1      0.03993056   Inf       1        23       265         0       288              1   NaN   NaN
[5]  {profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
      fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      followers_high}    =&gt; {real} 0.05208333          1    2    30        0.5   Inf                1     0.5520833                0.5         1   31.64835           586.3752                   1        Inf 0.3227486              1 0.05208333 0.5274725     4.199960e-10 0.02747253       1.0000000  1.428571 0.8958333        -3.872983  0.3116925           1 0.10416667      NaN 0.10416667  0.5520833 0.10416667 0.9687500         0.10416667 3.872983 0.02604167 Inf             1               NaN       Inf 0.2344036              0     2.116279        0.5   1      0.05208333   Inf       1        30       258         0       288              1   NaN   NaN
[6]  {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      follows_high}      =&gt; {real} 0.03993056          1    2    23        0.5   Inf                1     0.5399306                0.5         1   23.95660           555.4687                   1        Inf 0.2825971              1 0.03993056 0.5207957     7.546462e-08 0.02079566       0.9999999  1.352941 0.9201389        -3.391165  0.3016826           1 0.07986111      NaN 0.07986111  0.5399306 0.07986111 0.9600000         0.07986111 3.391165 0.01996528 Inf             1               NaN       Inf 0.2039395              0     2.086792        0.5   1      0.03993056   Inf       1        23       265         0       288              1   NaN   NaN
[7]  {profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
      fn_words_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      desc_length_med}   =&gt; {real} 0.07118056          1    2    41        0.5   Inf                1     0.5711806                0.5         1   44.14206           627.8511                   1        Inf 0.3773077              1 0.07118056 0.5383178     9.819951e-14 0.03831776       1.0000000  1.464286 0.8576389        -4.527693  0.3253034           1 0.14236111      NaN 0.14236111  0.5711806 0.14236111 0.9767442         0.14236111 4.527693 0.03559028 Inf             1               NaN       Inf 0.2768312              0     2.165992        0.5   1      0.07118056   Inf       1        41       247         0       288              1   NaN   NaN
[8]  {posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      follows_med}       =&gt; {real} 0.05729167          1    2    33        0.5   Inf                1     0.5572917                0.5         1   35.00552           598.2335                   1        Inf 0.3385016              1 0.05729167 0.5303867     4.404026e-11 0.03038674       1.0000000  1.434783 0.8854167        -4.062019  0.3155674           1 0.11458333      NaN 0.11458333  0.5572917 0.11458333 0.9714286         0.11458333 4.062019 0.02864583 Inf             1               NaN       Inf 0.2465228              0     2.129412        0.5   1      0.05729167   Inf       1        33       255         0       288              1   NaN   NaN
[9]  {nums_lun_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_high}    =&gt; {real} 0.18402778          1    2   106        0.5   Inf                1     0.6840278                0.5         1  129.90638           889.3893                   1        Inf 0.6066758              1 0.18402778 0.6127660     8.130661e-38 0.11276596       1.0000000  1.656250 0.6319444        -7.280110  0.4074509           1 0.36805556      NaN 0.36805556  0.6840278 0.36805556 0.9907407         0.36805556 7.280110 0.09201389 Inf             1               NaN       Inf 0.4749020              0     2.582418        0.5   1      0.18402778   Inf       1       106       182         0       288              1   NaN   NaN
[10] {desc_length_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      followers_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      follows_med}       =&gt; {real} 0.03819444          1    2    22        0.5   Inf                1     0.5381944                0.5         1   22.87365           550.4844                   1        Inf 0.2763854              1 0.03819444 0.5198556     1.571707e-07 0.01985560       0.9999998  1.375000 0.9236111        -3.316625  0.3000801           1 0.07638889      NaN 0.07638889  0.5381944 0.07638889 0.9583333         0.07638889 3.316625 0.01909722 Inf             1               NaN       Inf 0.1992767              0     2.082707        0.5   1      0.03819444   Inf       1        22       266         0       288              1   NaN   NaN
[11] {nums_lun_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      desc_length_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      followers_high}    =&gt; {real} 0.07118056          1    2    41        0.5   Inf                1     0.5711806                0.5         1   44.14206           627.8511                   1        Inf 0.3773077              1 0.07118056 0.5383178     9.819951e-14 0.03831776       1.0000000  1.464286 0.8576389        -4.527693  0.3253034           1 0.14236111      NaN 0.14236111  0.5711806 0.14236111 0.9767442         0.14236111 4.527693 0.03559028 Inf             1               NaN       Inf 0.2768312              0     2.165992        0.5   1      0.07118056   Inf       1        41       247         0       288              1   NaN   NaN
[12] {nums_lun_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      posts_high}        =&gt; {real} 0.05034722          1    2    29        0.5   Inf                1     0.5503472                0.5         1   30.53748           582.2801                   1        Inf 0.3173239              1 0.05034722 0.5265082     8.870185e-10 0.02650823       1.0000000  1.380952 0.8993056        -3.807887  0.3103586           1 0.10069444      NaN 0.10069444  0.5503472 0.10069444 0.9677419         0.10069444 3.807887 0.02517361 Inf             1               NaN       Inf 0.2302530              0     2.111969        0.5   1      0.05034722   Inf       1        29       259         0       288              1   NaN   NaN
[13] {nums_lun_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      fn_words_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_high}    =&gt; {real} 0.16840278          1    2    97        0.5   Inf                1     0.6684028                0.5         1  116.64301           845.3149                   1        Inf 0.5803495              1 0.16840278 0.6012526     3.581861e-34 0.10125261       1.0000000  1.644068 0.6631944        -6.964194  0.3944347           1 0.33680556      NaN 0.33680556  0.6684028 0.33680556 0.9898990         0.33680556 6.964194 0.08420139 Inf             1               NaN       Inf 0.4500058              0     2.507853        0.5   1      0.16840278   Inf       1        97       191         0       288              1   NaN   NaN</code></pre>
</div>
</div>
<p>Vemos que hay 13 reglas. Ahora, unamos las reglas de cuentas falsas y verdaderas en una variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar la unión de las reglas fake y real</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>reglas_FCA_real_fake <span class="ot">&lt;-</span> <span class="fu">c</span>(reglas_FCA_fake, reglas_FCA_real)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_FCA_real_fake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                    rhs       support confidence lift count addedValue boost casualConfidence casualSupport centeredConfidence certainty chiSquared collectiveStrength confirmedConfidence conviction    cosine counterexample   coverage       doc fishersExactTest       gini hyperConfidence hyperLift imbalance implicationIndex importance improvement    jaccard jMeasure      kappa kulczynski     lambda   laplace leastContradiction   lerman   leverage LIC maxconfidence mutualInformation oddsRatio       phi ralambondrainy relativeRisk rhsSupport RLD rulePowerFactor sebag stdLift table.n11 table.n01 table.n10 table.n00 varyingLiaison yuleQ yuleY
[1]  {followers_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      follows_med}       =&gt; {fake} 0.06423611          1    2    37        0.5   Inf                1     0.5642361                0.5         1   39.53989           613.3101                   1        Inf 0.3584302              1 0.06423611 0.5343228     2.115216e-12 0.03432282       1.0000000  1.480000 0.8715278        -4.301163  0.3205157           1 0.12847222      NaN 0.12847222  0.5642361 0.12847222 0.9743590         0.12847222 4.301163 0.03211806 Inf             1               NaN       Inf 0.2620031              0     2.147410        0.5   1      0.06423611   Inf       1        37       251         0       288              1   NaN   NaN
[2]  {public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      posts_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      followers_low}     =&gt; {fake} 0.15451389          1    2    89        0.5   Inf                1     0.6545139                0.5         1  105.26489           809.1431                   1        Inf 0.5559027              1 0.15451389 0.5913758     5.015407e-31 0.09137577       1.0000000  1.618182 0.6909722        -6.670832  0.3834800           1 0.30902778      NaN 0.30902778  0.6545139 0.30902778 0.9890110         0.30902778 6.670832 0.07725694 Inf             1               NaN       Inf 0.4274945              0     2.447236        0.5   1      0.15451389   Inf       1        89       199         0       288              1   NaN   NaN
[3]  {fn_words_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      followers_low}     =&gt; {fake} 0.03125000          1    2    18        0.5   Inf                1     0.5312500                0.5         1   18.58065           528.2006                   1        Inf 0.2500000              1 0.03125000 0.5161290     2.900458e-06 0.01612903       0.9999971  1.285714 0.9375000        -3.000000  0.2929423           1 0.06250000      NaN 0.06250000  0.5312500 0.06250000 0.9500000         0.06250000 3.000000 0.01562500 Inf             1               NaN       Inf 0.1796053              0     2.066667        0.5   1      0.03125000   Inf       1        18       270         0       288              1   NaN   NaN
[4]  {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      followers_low}     =&gt; {fake} 0.13715278          1    2    79        0.5   Inf                1     0.6371528                0.5         1   91.55734           767.2505                   1        Inf 0.5237419              1 0.13715278 0.5794769     3.294503e-27 0.07947686       1.0000000  1.612245 0.7256944        -6.284903  0.3704862           1 0.27430556      NaN 0.27430556  0.6371528 0.27430556 0.9876543         0.27430556 6.284903 0.06857639 Inf             1               NaN       Inf 0.3986900              0     2.377990        0.5   1      0.13715278   Inf       1        79       209         0       288              1   NaN   NaN
[5]  {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      posts_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      follows_low}       =&gt; {fake} 0.02777778          1    2    16        0.5   Inf                1     0.5277778                0.5         1   16.45714           515.0913                   1        Inf 0.2357023              1 0.02777778 0.5142857     1.231766e-05 0.01428571       0.9999877  1.333333 0.9444444        -2.828427  0.2887501           1 0.05555556      NaN 0.05555556  0.5277778 0.05555556 0.9444444         0.05555556 2.828427 0.01388889 Inf             1               NaN       Inf 0.1690309              0     2.058824        0.5   1      0.02777778   Inf       1        16       272         0       288              1   NaN   NaN
[6]  {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      posts_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      followers_low}     =&gt; {fake} 0.17881944          1    2   103        0.5   Inf                1     0.6788194                0.5         1  125.42918           874.2635                   1        Inf 0.5980292              1 0.17881944 0.6088795     1.372490e-36 0.10887949       1.0000000  1.661290 0.6423611        -7.176350  0.4030247           1 0.35763889      NaN 0.35763889  0.6788194 0.35763889 0.9904762         0.35763889 7.176350 0.08940972 Inf             1               NaN       Inf 0.4666465              0     2.556757        0.5   1      0.17881944   Inf       1       103       185         0       288              1   NaN   NaN
[7]  {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      private,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      posts_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
      follows_low}       =&gt; {fake} 0.05034722          1    2    29        0.5   Inf                1     0.5503472                0.5         1   30.53748           582.2801                   1        Inf 0.3173239              1 0.05034722 0.5265082     8.870185e-10 0.02650823       1.0000000  1.380952 0.8993056        -3.807887  0.3103586           1 0.10069444      NaN 0.10069444  0.5503472 0.10069444 0.9677419         0.10069444 3.807887 0.02517361 Inf             1               NaN       Inf 0.2302530              0     2.111969        0.5   1      0.05034722   Inf       1        29       259         0       288              1   NaN   NaN
[8]  {fn_equals_un,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      no_url}            =&gt; {fake} 0.03298611          1    2    19        0.5   Inf                1     0.5329861                0.5         1   19.64811           534.1926                   1        Inf 0.2568506              1 0.03298611 0.5170557     1.403447e-06 0.01705566       0.9999986  1.357143 0.9340278        -3.082207  0.2948587           1 0.06597222      NaN 0.06597222  0.5329861 0.06597222 0.9523810         0.06597222 3.082207 0.01649306 Inf             1               NaN       Inf 0.1846925              0     2.070632        0.5   1      0.03298611   Inf       1        19       269         0       288              1   NaN   NaN
[9]  {nums_lun_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      desc_length_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      follows_med}       =&gt; {fake} 0.02951389          1    2    17        0.5   Inf                1     0.5295139                0.5         1   17.51699           521.8531                   1        Inf 0.2429563              1 0.02951389 0.5152057     5.982863e-06 0.01520572       0.9999940  1.307692 0.9409722        -2.915476  0.2909129           1 0.05902778      NaN 0.05902778  0.5295139 0.05902778 0.9473684         0.05902778 2.915476 0.01475694 Inf             1               NaN       Inf 0.1743888              0     2.062731        0.5   1      0.02951389   Inf       1        17       271         0       288              1   NaN   NaN
[10] {nums_lun_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      desc_length_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      followers_med}     =&gt; {fake} 0.05381944          1    2    31        0.5   Inf                1     0.5538194                0.5         1   32.76330           590.3937                   1        Inf 0.3280837              1 0.05381944 0.5284404     1.984596e-10 0.02844037       1.0000000  1.409091 0.8923611        -3.937004  0.3130037           1 0.10763889      NaN 0.10763889  0.5538194 0.10763889 0.9696970         0.10763889 3.937004 0.02690972 Inf             1               NaN       Inf 0.2384968              0     2.120623        0.5   1      0.05381944   Inf       1        31       257         0       288              1   NaN   NaN
[11] {nums_lun_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      posts_med}         =&gt; {fake} 0.04166667          1    2    24        0.5   Inf                1     0.5416667                0.5         1   25.04348           560.2747                   1        Inf 0.2886751              1 0.04166667 0.5217391     3.616297e-08 0.02173913       1.0000000  1.411765 0.9166667        -3.464102  0.3032306           1 0.08333333      NaN 0.08333333  0.5416667 0.08333333 0.9615385         0.08333333 3.464102 0.02083333 Inf             1               NaN       Inf 0.2085144              0     2.090909        0.5   1      0.04166667   Inf       1        24       264         0       288              1   NaN   NaN
[12] {no_profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      follows_low}       =&gt; {fake} 0.19965278          1    2   115        0.5   Inf                1     0.6996528                0.5         1  143.68764           937.6847                   1        Inf 0.6319063              1 0.19965278 0.6247289     1.406311e-41 0.12472885       1.0000000  1.666667 0.6006944        -7.582875  0.4213039           1 0.39930556      NaN 0.39930556  0.6996528 0.39930556 0.9914530         0.39930556 7.582875 0.09982639 Inf             1               NaN       Inf 0.4994574              0     2.664740        0.5   1      0.19965278   Inf       1       115       173         0       288              1   NaN   NaN
[13] {no_profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      followers_low}     =&gt; {fake} 0.22222222          1    2   128        0.5   Inf                1     0.7222222                0.5         1  164.57143          1016.5052                   1        Inf 0.6666667              1 0.22222222 0.6428571     3.076242e-47 0.14285714       1.0000000  1.684211 0.5555556        -8.000000  0.4430330           1 0.44444444      NaN 0.44444444  0.7222222 0.44444444 0.9923077         0.44444444 8.000000 0.11111111 Inf             1               NaN       Inf 0.5345225              0     2.800000        0.5   1      0.22222222   Inf       1       128       160         0       288              1   NaN   NaN
[14] {no_profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      follows_high}      =&gt; {fake} 0.03298611          1    2    19        0.5   Inf                1     0.5329861                0.5         1   19.64811           534.1926                   1        Inf 0.2568506              1 0.03298611 0.5170557     1.403447e-06 0.01705566       0.9999986  1.357143 0.9340278        -3.082207  0.2948587           1 0.06597222      NaN 0.06597222  0.5329861 0.06597222 0.9523810         0.06597222 3.082207 0.01649306 Inf             1               NaN       Inf 0.1846925              0     2.070632        0.5   1      0.03298611   Inf       1        19       269         0       288              1   NaN   NaN
[15] {no_profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      fn_words_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      desc_length_low}   =&gt; {fake} 0.05208333          1    2    30        0.5   Inf                1     0.5520833                0.5         1   31.64835           586.3752                   1        Inf 0.3227486              1 0.05208333 0.5274725     4.199960e-10 0.02747253       1.0000000  1.428571 0.8958333        -3.872983  0.3116925           1 0.10416667      NaN 0.10416667  0.5520833 0.10416667 0.9687500         0.10416667 3.872983 0.02604167 Inf             1               NaN       Inf 0.2344036              0     2.116279        0.5   1      0.05208333   Inf       1        30       258         0       288              1   NaN   NaN
[16] {profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
      desc_length_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      posts_high}        =&gt; {real} 0.07118056          1    2    41        0.5   Inf                1     0.5711806                0.5         1   44.14206           627.8511                   1        Inf 0.3773077              1 0.07118056 0.5383178     9.819951e-14 0.03831776       1.0000000  1.464286 0.8576389        -4.527693  0.3253034           1 0.14236111      NaN 0.14236111  0.5711806 0.14236111 0.9767442         0.14236111 4.527693 0.03559028 Inf             1               NaN       Inf 0.2768312              0     2.165992        0.5   1      0.07118056   Inf       1        41       247         0       288              1   NaN   NaN
[17] {desc_length_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      follows_med}       =&gt; {real} 0.03125000          1    2    18        0.5   Inf                1     0.5312500                0.5         1   18.58065           528.2006                   1        Inf 0.2500000              1 0.03125000 0.5161290     2.900458e-06 0.01612903       0.9999971  1.285714 0.9375000        -3.000000  0.2929423           1 0.06250000      NaN 0.06250000  0.5312500 0.06250000 0.9500000         0.06250000 3.000000 0.01562500 Inf             1               NaN       Inf 0.1796053              0     2.066667        0.5   1      0.03125000   Inf       1        18       270         0       288              1   NaN   NaN
[18] {desc_length_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      follows_high}      =&gt; {real} 0.02951389          1    2    17        0.5   Inf                1     0.5295139                0.5         1   17.51699           521.8531                   1        Inf 0.2429563              1 0.02951389 0.5152057     5.982863e-06 0.01520572       0.9999940  1.307692 0.9409722        -2.915476  0.2909129           1 0.05902778      NaN 0.05902778  0.5295139 0.05902778 0.9473684         0.05902778 2.915476 0.01475694 Inf             1               NaN       Inf 0.1743888              0     2.062731        0.5   1      0.02951389   Inf       1        17       271         0       288              1   NaN   NaN
[19] {desc_length_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_high}    =&gt; {real} 0.03993056          1    2    23        0.5   Inf                1     0.5399306                0.5         1   23.95660           555.4687                   1        Inf 0.2825971              1 0.03993056 0.5207957     7.546462e-08 0.02079566       0.9999999  1.352941 0.9201389        -3.391165  0.3016826           1 0.07986111      NaN 0.07986111  0.5399306 0.07986111 0.9600000         0.07986111 3.391165 0.01996528 Inf             1               NaN       Inf 0.2039395              0     2.086792        0.5   1      0.03993056   Inf       1        23       265         0       288              1   NaN   NaN
[20] {profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
      fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      followers_high}    =&gt; {real} 0.05208333          1    2    30        0.5   Inf                1     0.5520833                0.5         1   31.64835           586.3752                   1        Inf 0.3227486              1 0.05208333 0.5274725     4.199960e-10 0.02747253       1.0000000  1.428571 0.8958333        -3.872983  0.3116925           1 0.10416667      NaN 0.10416667  0.5520833 0.10416667 0.9687500         0.10416667 3.872983 0.02604167 Inf             1               NaN       Inf 0.2344036              0     2.116279        0.5   1      0.05208333   Inf       1        30       258         0       288              1   NaN   NaN
[21] {fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      follows_high}      =&gt; {real} 0.03993056          1    2    23        0.5   Inf                1     0.5399306                0.5         1   23.95660           555.4687                   1        Inf 0.2825971              1 0.03993056 0.5207957     7.546462e-08 0.02079566       0.9999999  1.352941 0.9201389        -3.391165  0.3016826           1 0.07986111      NaN 0.07986111  0.5399306 0.07986111 0.9600000         0.07986111 3.391165 0.01996528 Inf             1               NaN       Inf 0.2039395              0     2.086792        0.5   1      0.03993056   Inf       1        23       265         0       288              1   NaN   NaN
[22] {profile_pic,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
      fn_words_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      desc_length_med}   =&gt; {real} 0.07118056          1    2    41        0.5   Inf                1     0.5711806                0.5         1   44.14206           627.8511                   1        Inf 0.3773077              1 0.07118056 0.5383178     9.819951e-14 0.03831776       1.0000000  1.464286 0.8576389        -4.527693  0.3253034           1 0.14236111      NaN 0.14236111  0.5711806 0.14236111 0.9767442         0.14236111 4.527693 0.03559028 Inf             1               NaN       Inf 0.2768312              0     2.165992        0.5   1      0.07118056   Inf       1        41       247         0       288              1   NaN   NaN
[23] {posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      follows_med}       =&gt; {real} 0.05729167          1    2    33        0.5   Inf                1     0.5572917                0.5         1   35.00552           598.2335                   1        Inf 0.3385016              1 0.05729167 0.5303867     4.404026e-11 0.03038674       1.0000000  1.434783 0.8854167        -4.062019  0.3155674           1 0.11458333      NaN 0.11458333  0.5572917 0.11458333 0.9714286         0.11458333 4.062019 0.02864583 Inf             1               NaN       Inf 0.2465228              0     2.129412        0.5   1      0.05729167   Inf       1        33       255         0       288              1   NaN   NaN
[24] {nums_lun_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_high}    =&gt; {real} 0.18402778          1    2   106        0.5   Inf                1     0.6840278                0.5         1  129.90638           889.3893                   1        Inf 0.6066758              1 0.18402778 0.6127660     8.130661e-38 0.11276596       1.0000000  1.656250 0.6319444        -7.280110  0.4074509           1 0.36805556      NaN 0.36805556  0.6840278 0.36805556 0.9907407         0.36805556 7.280110 0.09201389 Inf             1               NaN       Inf 0.4749020              0     2.582418        0.5   1      0.18402778   Inf       1       106       182         0       288              1   NaN   NaN
[25] {desc_length_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      followers_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
      follows_med}       =&gt; {real} 0.03819444          1    2    22        0.5   Inf                1     0.5381944                0.5         1   22.87365           550.4844                   1        Inf 0.2763854              1 0.03819444 0.5198556     1.571707e-07 0.01985560       0.9999998  1.375000 0.9236111        -3.316625  0.3000801           1 0.07638889      NaN 0.07638889  0.5381944 0.07638889 0.9583333         0.07638889 3.316625 0.01909722 Inf             1               NaN       Inf 0.1992767              0     2.082707        0.5   1      0.03819444   Inf       1        22       266         0       288              1   NaN   NaN
[26] {nums_lun_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      desc_length_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
      followers_high}    =&gt; {real} 0.07118056          1    2    41        0.5   Inf                1     0.5711806                0.5         1   44.14206           627.8511                   1        Inf 0.3773077              1 0.07118056 0.5383178     9.819951e-14 0.03831776       1.0000000  1.464286 0.8576389        -4.527693  0.3253034           1 0.14236111      NaN 0.14236111  0.5711806 0.14236111 0.9767442         0.14236111 4.527693 0.03559028 Inf             1               NaN       Inf 0.2768312              0     2.165992        0.5   1      0.07118056   Inf       1        41       247         0       288              1   NaN   NaN
[27] {nums_lun_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      fn_words_med,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      public,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      posts_high}        =&gt; {real} 0.05034722          1    2    29        0.5   Inf                1     0.5503472                0.5         1   30.53748           582.2801                   1        Inf 0.3173239              1 0.05034722 0.5265082     8.870185e-10 0.02650823       1.0000000  1.380952 0.8993056        -3.807887  0.3103586           1 0.10069444      NaN 0.10069444  0.5503472 0.10069444 0.9677419         0.10069444 3.807887 0.02517361 Inf             1               NaN       Inf 0.2302530              0     2.111969        0.5   1      0.05034722   Inf       1        29       259         0       288              1   NaN   NaN
[28] {nums_lun_low,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      fn_words_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
      posts_high,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
      followers_high}    =&gt; {real} 0.16840278          1    2    97        0.5   Inf                1     0.6684028                0.5         1  116.64301           845.3149                   1        Inf 0.5803495              1 0.16840278 0.6012526     3.581861e-34 0.10125261       1.0000000  1.644068 0.6631944        -6.964194  0.3944347           1 0.33680556      NaN 0.33680556  0.6684028 0.33680556 0.9898990         0.33680556 6.964194 0.08420139 Inf             1               NaN       Inf 0.4500058              0     2.507853        0.5   1      0.16840278   Inf       1        97       191         0       288              1   NaN   NaN</code></pre>
</div>
</div>
<p>Hay 28 reglas en total.</p>
<p>Ahora, vamos a predecir la veracidad de las cuentas en el dataset de test usando las reglas obtenidas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Leer el archivo CSV</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>datos_test_predicciones <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"datos_test_predicciones.csv"</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear la fila vacía 'fake_predict_FCA' en 'datos_test_predicciones'</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>datos_test_predicciones<span class="sc">$</span>fake_predict_FCA <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Bucle para recorrer cada fila de la matriz datosFCA_test</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(datosFCA_test)) {</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Obtener los nombres de las columnas de la fila presente (donde el valor es 1)</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  columnas_presentes <span class="ot">&lt;-</span> <span class="fu">colnames</span>(datosFCA_test)[datosFCA_test[i, ] <span class="sc">==</span> <span class="dv">1</span>]</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Bucle para recorrer cada regla en reglas_FCA_real_fake</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(reglas_FCA_real_fake)) {</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Obtener el lhs de la regla j</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    lhs_rule <span class="ot">&lt;-</span> <span class="fu">as</span>(<span class="fu">lhs</span>(reglas_FCA_real_fake[j]), <span class="st">"list"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Comprobar si el lhs de la regla es subconjunto de columnas_presentes</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">all</span>(lhs_rule <span class="sc">%in%</span> columnas_presentes)) {</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Obtener el rhs (consecuente) de la regla</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>      rhs_rule <span class="ot">&lt;-</span> <span class="fu">labels</span>(<span class="fu">rhs</span>(reglas_FCA_real_fake[j]))[<span class="dv">1</span>]</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Asignar el valor numérico según el contenido del consecuente</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"real"</span>, rhs_rule)) {</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>        datos_test_predicciones<span class="sc">$</span>fake_predict_FCA[i] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"fake"</span>, rhs_rule)) {</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>        datos_test_predicciones<span class="sc">$</span>fake_predict_FCA[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>      <span class="cf">break</span>  <span class="co"># Salir del bucle una vez encontrada una regla aplicable</span></span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Si no se ha encontrado ninguna regla aplicable, se sigue esta heurística:</span></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Si la cuenta tiene URL externa, es verdadera</span></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="st">"url"</span> <span class="sc">%in%</span> columnas_presentes) {</span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a>        datos_test_predicciones<span class="sc">$</span>fake_predict_FCA[i] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Si la cuenta no tiene foto de perfil, es falsa</span></span>
<span id="cb41-39"><a href="#cb41-39" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span> (<span class="st">"no_profile_pic"</span> <span class="sc">%in%</span> columnas_presentes) {</span>
<span id="cb41-40"><a href="#cb41-40" aria-hidden="true" tabindex="-1"></a>        datos_test_predicciones<span class="sc">$</span>fake_predict_FCA[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb41-41"><a href="#cb41-41" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb41-42"><a href="#cb41-42" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Si la cuenta tiene menos de 250 seguido, es falsa</span></span>
<span id="cb41-43"><a href="#cb41-43" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span> <span class="cf">if</span> (<span class="st">"follows_low"</span> <span class="sc">%in%</span> columnas_presentes) {</span>
<span id="cb41-44"><a href="#cb41-44" aria-hidden="true" tabindex="-1"></a>        datos_test_predicciones<span class="sc">$</span>fake_predict_FCA[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb41-45"><a href="#cb41-45" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb41-46"><a href="#cb41-46" aria-hidden="true" tabindex="-1"></a>      <span class="co"># En otro caso, consideramos que es verdadera</span></span>
<span id="cb41-47"><a href="#cb41-47" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span> {</span>
<span id="cb41-48"><a href="#cb41-48" aria-hidden="true" tabindex="-1"></a>        datos_test_predicciones<span class="sc">$</span>fake_predict_FCA[i] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb41-49"><a href="#cb41-49" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb41-50"><a href="#cb41-50" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb41-51"><a href="#cb41-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb41-52"><a href="#cb41-52" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-53"><a href="#cb41-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-54"><a href="#cb41-54" aria-hidden="true" tabindex="-1"></a><span class="co">#View(datos_test_predicciones)</span></span>
<span id="cb41-55"><a href="#cb41-55" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_test_predicciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  fake fake_predict_RA fake_predict_FCA
1    0               1                1
2    0               0                0
3    0               0                0
4    0               0                0
5    0               1                0
6    0               1                0</code></pre>
</div>
</div>
<p>Vemos que hay valores 0/1 en la columna fake_predict_FCA.</p>
<p>Ahora, contemos el número de valores NA en la columna fake_predict_FCA:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contar el número de valores NA en la columna fake_predict_FCA</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"La columna fake_predict_FCA tiene "</span>, <span class="fu">sum</span>(<span class="fu">is.na</span>(datos_test_predicciones<span class="sc">$</span>fake_predict_FCA)), <span class="st">" valores NA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La columna fake_predict_FCA tiene  0  valores NA</code></pre>
</div>
</div>
<p>Parece que la predicción ha sido satisfactoria. Ahora, calculemos el porcentaje de éxito en la predicción de cuentas falsas, de cuentas verdaderas y en general:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el porcentaje de éxito en la predicción de cuentas falsas</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>predicciones_correctas_falsas_FCA <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake_predict_FCA <span class="sc">==</span> datos_test_predicciones<span class="sc">$</span>fake <span class="sc">&amp;</span> datos_test_predicciones<span class="sc">$</span>fake <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>total_falsas_FCA <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>porcentaje_exito_falsas_FCA <span class="ot">&lt;-</span> (predicciones_correctas_falsas_FCA <span class="sc">/</span> total_falsas_FCA) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el porcentaje de éxito en la predicción de cuentas verdaderas</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>predicciones_correctas_verdaderas_FCA <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake_predict_FCA <span class="sc">==</span> datos_test_predicciones<span class="sc">$</span>fake <span class="sc">&amp;</span> datos_test_predicciones<span class="sc">$</span>fake <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>total_verdaderas_FCA <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>porcentaje_exito_verdaderas_FCA <span class="ot">&lt;-</span> (predicciones_correctas_verdaderas_FCA <span class="sc">/</span> total_verdaderas_FCA) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el porcentaje de éxito general</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>predicciones_correctas_FCA <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake_predict_FCA <span class="sc">==</span> datos_test_predicciones<span class="sc">$</span>fake)</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>total_predicciones_FCA <span class="ot">&lt;-</span> <span class="fu">nrow</span>(datos_test_predicciones)</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>porcentaje_exito_general_FCA <span class="ot">&lt;-</span> (predicciones_correctas_FCA <span class="sc">/</span> total_predicciones_FCA) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar el data frame en un archivo CSV</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(datos_test_predicciones, <span class="st">"datos_test_predicciones.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimir el resultado</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"El porcentaje de éxito en la predicción de cuentas falsas es:"</span>, porcentaje_exito_falsas_FCA, <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"El porcentaje de éxito en la predicción de cuentas verdaderas es:"</span>, porcentaje_exito_verdaderas_FCA, <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"El porcentaje de éxito general en la predicción de cuentas es:"</span>, porcentaje_exito_general_FCA, <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>El porcentaje de éxito en la predicción de cuentas falsas es: 80 %
 El porcentaje de éxito en la predicción de cuentas verdaderas es: 95 %
 El porcentaje de éxito general en la predicción de cuentas es: 87.5 %</code></pre>
</div>
</div>
<p>Como vemos, los porcentajes de éxito son muy altos, lo que indica que el modelo de regresión ha sido efectivo en la predicción de cuentas falsas y verdaderas.</p>
<p>Añadamos los porcentajes de éxito a la tabla de porcentajes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Leer el archivo CSV</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>exito_predicciones <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"exito_predicciones.csv"</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir los porcentajes de éxito a la tabla de porcentajes</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>exito_predicciones <span class="ot">&lt;-</span> <span class="fu">rbind</span>(exito_predicciones, <span class="fu">c</span>(<span class="st">"FCA"</span>, porcentaje_exito_falsas_FCA, porcentaje_exito_verdaderas_FCA, porcentaje_exito_general_FCA))</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>exito_predicciones</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  tipo Éxito_cuentas_falsas Éxito_cuentas_verdaderas
1 Reglas de Asociación     83.3333333333333                       75
2                  FCA                   80                       95
     Éxito_general
1 79.1666666666667
2             87.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar el data frame en un archivo CSV</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(exito_predicciones, <span class="st">"exito_predicciones.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Las reglas de asociación han rendido algo mejor que FCA en la predicción de cuentas falsas, pero el formal concept analysis ha sido bastante mejor en la predicción de cuentas verdaderas (20 puntos por encima) y en general. FCA ha sido 8 puntos más efectivo que reglas de asociación en la predicción general.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./reglas_asociacion.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reglas de Asociación</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./regresion.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Regresión</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>