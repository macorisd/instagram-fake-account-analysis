<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Proyecto de análisis de cuentas falsas en Instagram - 3&nbsp; Reglas de Asociación</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./fca.html" rel="next">
<link href="./visualizacion.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./reglas_asociacion.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reglas de Asociación</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Proyecto de análisis de cuentas falsas en Instagram</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Importación del dataset y Análisis Exploratorio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualizacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Visualización</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reglas_asociacion.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reglas de Asociación</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fca.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Formal Concept Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regresion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Regresión</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Conclusión</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#reglas-de-asociación" id="toc-reglas-de-asociación" class="nav-link active" data-scroll-target="#reglas-de-asociación"><span class="header-section-number">3.1</span> Reglas de Asociación</a>
  <ul class="collapse">
  <li><a href="#obtención-de-las-reglas" id="toc-obtención-de-las-reglas" class="nav-link" data-scroll-target="#obtención-de-las-reglas"><span class="header-section-number">3.1.1</span> Obtención de las reglas</a></li>
  <li><a href="#qué-parámetros-deciden-si-una-cuenta-es-verdadera-o-falsa" id="toc-qué-parámetros-deciden-si-una-cuenta-es-verdadera-o-falsa" class="nav-link" data-scroll-target="#qué-parámetros-deciden-si-una-cuenta-es-verdadera-o-falsa"><span class="header-section-number">3.1.2</span> ¿Qué parámetros deciden si una cuenta es verdadera o falsa?</a></li>
  <li><a href="#predicción" id="toc-predicción" class="nav-link" data-scroll-target="#predicción"><span class="header-section-number">3.1.3</span> Predicción</a></li>
  <li><a href="#qué-patrones-encontramos-conociendo-la-veracidad-o-falsedad-de-la-cuenta" id="toc-qué-patrones-encontramos-conociendo-la-veracidad-o-falsedad-de-la-cuenta" class="nav-link" data-scroll-target="#qué-patrones-encontramos-conociendo-la-veracidad-o-falsedad-de-la-cuenta"><span class="header-section-number">3.1.4</span> ¿Qué patrones encontramos conociendo la veracidad o falsedad de la cuenta?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reglas de Asociación</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Librerías, datasets y procesamiento previo</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fcaR)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arules)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"train.csv"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datos)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>datos_test <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"test.csv"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datos_test)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">rename</span>(datos, <span class="at">profile_pic=</span><span class="st">`</span><span class="at">profile pic</span><span class="st">`</span>, <span class="st">`</span><span class="at">nums/length_username</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">nums/length username</span><span class="st">`</span>, <span class="at">fullname_words=</span><span class="st">`</span><span class="at">fullname words</span><span class="st">`</span>, <span class="st">`</span><span class="at">nums/length_fullname</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">nums/length fullname</span><span class="st">`</span>, <span class="at">description_length=</span><span class="st">`</span><span class="at">description length</span><span class="st">`</span>, <span class="at">external_URL=</span><span class="st">`</span><span class="at">external URL</span><span class="st">`</span>, <span class="at">posts=</span><span class="st">`</span><span class="at">#posts</span><span class="st">`</span>, <span class="at">followers=</span><span class="st">`</span><span class="at">#followers</span><span class="st">`</span>, <span class="at">follows=</span><span class="st">`</span><span class="at">#follows</span><span class="st">`</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>datos_test <span class="ot">&lt;-</span> <span class="fu">rename</span>(datos_test, <span class="at">profile_pic=</span><span class="st">`</span><span class="at">profile pic</span><span class="st">`</span>, <span class="st">`</span><span class="at">nums/length_username</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">nums/length username</span><span class="st">`</span>, <span class="at">fullname_words=</span><span class="st">`</span><span class="at">fullname words</span><span class="st">`</span>, <span class="st">`</span><span class="at">nums/length_fullname</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">nums/length fullname</span><span class="st">`</span>, <span class="at">description_length=</span><span class="st">`</span><span class="at">description length</span><span class="st">`</span>, <span class="at">external_URL=</span><span class="st">`</span><span class="at">external URL</span><span class="st">`</span>, <span class="at">posts=</span><span class="st">`</span><span class="at">#posts</span><span class="st">`</span>, <span class="at">followers=</span><span class="st">`</span><span class="at">#followers</span><span class="st">`</span>, <span class="at">follows=</span><span class="st">`</span><span class="at">#follows</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="reglas-de-asociación" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="reglas-de-asociación"><span class="header-section-number">3.1</span> Reglas de Asociación</h2>
<p>Ya hemos explorado, numérica y visualmente, el conjunto de datos de entrenamiento. A continuación, es turno de trabajar con las reglas de asociación, o lo que es lo mismo, descubrir relaciones y patrones de comportamiento revelados por los datos.</p>
<section id="obtención-de-las-reglas" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="obtención-de-las-reglas"><span class="header-section-number">3.1.1</span> Obtención de las reglas</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminar las columnas de visualización</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>num_length_interval <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>fullname_length_interval <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>description_length_interval <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>posts_interval <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>followers_interval <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>datos<span class="sc">$</span>follows_interval <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Tras eliminar las columnas del apartado de visualización, pasemos a la generación de reglas de asociación, no sin antes ajustar el dataset para adecuarlo a la producción de las reglas.</p>
<p>En primer lugar, convertiremos el dataset a un data frame, y ajustaremos los tipos de las columnas. Necesitamos convertir las variables binarias al tipo “factor”, para que no aparezcan intervalos del tipo [0,1] en estas variables en las reglas, así como discretizar a nuestro gusto las variables numéricas, para establecer categorías/intervalos razonables de acuerdo al dato particular con el que estemos trabajando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir dataset a data frame</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>datosDF <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(datos)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar tipo y un valor de las columnas 1 y 3</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"La clase de la columna 1 (profile_pic) es:"</span>, <span class="fu">class</span>(datosDF[[<span class="dv">1</span>]]), <span class="st">"</span><span class="sc">\n</span><span class="st">La clase de la columna 3 (fullname_words) es:"</span>, <span class="fu">class</span>(datosDF[[<span class="dv">3</span>]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La clase de la columna 1 (profile_pic) es: numeric 
La clase de la columna 3 (fullname_words) es: numeric</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datosDF, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  profile_pic nums.length_username fullname_words nums.length_fullname
1           1                 0.27              0                    0
2           1                 0.00              2                    0
3           1                 0.10              2                    0
4           1                 0.00              1                    0
5           1                 0.00              2                    0
  name..username description_length external_URL private posts followers
1              0                 53            0       0    32      1000
2              0                 44            0       0   286      2740
3              0                  0            0       1    13       159
4              0                 82            0       0   679       414
5              0                  0            0       1     6       151
  follows fake
1     955    0
2     533    0
3      98    0
4     651    0
5     126    0</code></pre>
</div>
</div>
<p>Como vemos, los tipos iniciales de las variables profile_pic y fullname_words son numéricos.</p>
<p>Ahora pasemos a ajustar los tipos de datos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Discretizar columnas numéricas</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>datosDF<span class="sc">$</span>nums.length_username <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF<span class="sc">$</span>nums.length_username, <span class="at">method=</span><span class="st">"interval"</span>, <span class="at">breaks =</span> <span class="dv">5</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>datosDF<span class="sc">$</span>fullname_words <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF<span class="sc">$</span>fullname_words, <span class="at">method=</span><span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in discretize(datosDF$fullname_words, method = "frequency", breaks = 5): The calculated breaks are: 0, 1, 1, 2, 2, 12
  Only unique breaks are used reducing the number of intervals. Look at ? discretize for details.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>datosDF<span class="sc">$</span>nums.length_fullname <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF<span class="sc">$</span>nums.length_fullname, <span class="at">method=</span><span class="st">"interval"</span>, <span class="at">breaks =</span> <span class="dv">5</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>datosDF<span class="sc">$</span>description_length <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF<span class="sc">$</span>description_length, <span class="at">method=</span><span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in discretize(datosDF$description_length, method = "frequency", : The calculated breaks are: 0, 0, 0, 5.00000000000006, 43, 150
  Only unique breaks are used reducing the number of intervals. Look at ? discretize for details.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>datosDF<span class="sc">$</span>posts <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF<span class="sc">$</span>posts, <span class="at">method=</span><span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in discretize(datosDF$posts, method = "frequency", breaks = 7): The calculated breaks are: 0, 0, 1, 5, 17.5714285714286, 63.7142857142857, 186.571428571428, 7389
  Only unique breaks are used reducing the number of intervals. Look at ? discretize for details.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>datosDF<span class="sc">$</span>followers <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF<span class="sc">$</span>followers, <span class="at">method=</span><span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">10</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>datosDF<span class="sc">$</span>follows <span class="ot">&lt;-</span> <span class="fu">discretize</span>(datosDF<span class="sc">$</span>follows, <span class="at">method=</span><span class="st">"frequency"</span>, <span class="at">breaks =</span> <span class="dv">7</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Identificar las columnas binarias y numéricas</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>columnas_binarias <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">12</span>) <span class="co"># Índices de las columnas binarias</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir columnas binarias a factores</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>datosDF[, columnas_binarias] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(datosDF[, columnas_binarias], factor)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datosDF)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Expliquemos el sentido de los parámetros usados en la discretización/conversión para cada variable:</p>
<ul>
<li><p>profile_pic: esta variable es binaria, con lo que se convierte a factor y tendrá 2 niveles.</p></li>
<li><p>nums/length_username: esta variable es numérica pero está comprendida entre 0 y 1. Por ello, he usado 5 breaks (máximo de 5 categorías) y el método interval (categorías de igual tamaño).</p></li>
<li><p>fullname_words: esta variable es numérica, con valores pequeños. Por ello, he usado 5 breaks (máximo de 5 categorías) y el método frequency (categorías de distinto tamaño, calculado en base a la frecuencia de los valores).</p></li>
<li><p>nums/length_fullname: esta variable es numérica pero está comprendida entre 0 y 1. Por ello, he usado 5 breaks (máximo de 5 categorías) y el método interval (categorías de igual tamaño).</p></li>
<li><p>name==username: esta variable es binaria, con lo que se convierte a factor y tendrá 2 niveles.</p></li>
<li><p>description_length: esta variable es numérica, con valores relativamente pequeños. Por ello, he usado 5 breaks (máximo de 5 categorías) y el método frequency (categorías de distinto tamaño, calculado en base a la frecuencia de los valores).</p></li>
<li><p>external_URL: esta variable es binaria, con lo que se convierte a factor y tendrá 2 niveles.</p></li>
<li><p>private: esta variable es binaria, con lo que se convierte a factor y tendrá 2 niveles.</p></li>
<li><p>posts: esta variable es numérica, con valores que pueden llegar a ser grandes. Por ello, he usado 7 breaks (máximo de 7 categorías) y el método frequency (categorías de distinto tamaño, calculado en base a la frecuencia de los valores).</p></li>
<li><p>followers: esta variable es numérica, con valores que pueden llegar a ser enormes Por ello, he usado 10 breaks (máximo de 10 categorías) y el método frequency (categorías de distinto tamaño, calculado en base a la frecuencia de los valores).</p></li>
<li><p>follows: esta variable es numérica, con valores que pueden llegar a ser grandes. Por ello, he usado 7 breaks (máximo de 7 categorías) y el método frequency (categorías de distinto tamaño, calculado en base a la frecuencia de los valores).</p></li>
<li><p>fake: esta variable es binaria, con lo que se convierte a factor y tendrá 2 niveles.</p></li>
</ul>
<p>Discretizar variables numéricas antes de crear reglas de asociación es recomendable, ya que ayuda a simplificar el análisis y mejorar la capacidad para manejar el ruido y la variabilidad en los datos.</p>
<p>Ahora, veamos los niveles (número de intervalos) que posee cada variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtener los niveles de cada variable recorriendo las columnas</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (col_name <span class="cf">in</span> <span class="fu">names</span>(datosDF)) {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  col <span class="ot">&lt;-</span> datosDF[[col_name]]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.factor</span>(col)) {</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">length</span>(<span class="fu">levels</span>(col)), <span class="st">" niveles en"</span>, col_name, <span class="st">":"</span>, <span class="fu">levels</span>(col), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2  niveles en profile_pic : 0 1 
5  niveles en nums.length_username : [0,0.184) [0.184,0.368) [0.368,0.552) [0.552,0.736) [0.736,0.92] 
3  niveles en fullname_words : [0,1) [1,2) [2,12] 
5  niveles en nums.length_fullname : [0,0.2) [0.2,0.4) [0.4,0.6) [0.6,0.8) [0.8,1] 
2  niveles en name..username : 0 1 
3  niveles en description_length : [0,5) [5,43) [43,150] 
2  niveles en external_URL : 0 1 
2  niveles en private : 0 1 
6  niveles en posts : [0,1) [1,5) [5,17.6) [17.6,63.7) [63.7,187) [187,7.39e+03] 
10  niveles en followers : [0,10.5) [10.5,26) [26,49) [49,78) [78,150) [150,271) [271,496) [496,916) [916,2.58e+03) [2.58e+03,1.53e+07] 
7  niveles en follows : [0,26) [26,71) [71,159) [159,322) [322,521) [521,904) [904,7.5e+03] 
2  niveles en fake : 0 1 </code></pre>
</div>
</div>
<p>Ahora, veamos el cambio en el tipo de datos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar tipo y un valor de las columnas 1 y 3</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"La clase de la columna 1 (profile_pic) es:"</span>, <span class="fu">class</span>(datosDF[[<span class="dv">1</span>]]), <span class="st">"</span><span class="sc">\n</span><span class="st">La clase de la columna 3 (fullname_words) es:"</span>, <span class="fu">class</span>(datosDF[[<span class="dv">3</span>]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La clase de la columna 1 (profile_pic) es: factor 
La clase de la columna 3 (fullname_words) es: factor</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datosDF, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  profile_pic nums.length_username fullname_words nums.length_fullname
1           1        [0.184,0.368)          [0,1)              [0,0.2)
2           1            [0,0.184)         [2,12]              [0,0.2)
3           1            [0,0.184)         [2,12]              [0,0.2)
4           1            [0,0.184)          [1,2)              [0,0.2)
5           1            [0,0.184)         [2,12]              [0,0.2)
  name..username description_length external_URL private          posts
1              0           [43,150]            0       0    [17.6,63.7)
2              0           [43,150]            0       0 [187,7.39e+03]
3              0              [0,5)            0       1       [5,17.6)
4              0           [43,150]            0       0 [187,7.39e+03]
5              0              [0,5)            0       1       [5,17.6)
            followers       follows fake
1      [916,2.58e+03) [904,7.5e+03]    0
2 [2.58e+03,1.53e+07]     [521,904)    0
3           [150,271)      [71,159)    0
4           [271,496)     [521,904)    0
5           [150,271)      [71,159)    0</code></pre>
</div>
</div>
<p>Como podemos ver, ahora profile_pic tiene un valor 1 (de tipo factror), y fullname_words tiene valores comprendidos en un intervalo (categorías).</p>
<p>Para generar reglas de asociación, se recomienda trabajar con datos de tipo transacción, ya que este tipo permite representar los datos en un formato adecuado para el algoritmo, facilitando la identificación de patrones de asociación. Por ello, convertiremos datosDF en tipo transacciones:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir a tipo transacción</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>Tdatos <span class="ot">&lt;-</span> <span class="fu">as</span>(datosDF, <span class="st">"transactions"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(Tdatos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "transactions"
attr(,"package")
[1] "arules"</code></pre>
</div>
</div>
<p>Una vez preparados los datos, es hora de utilizar el algoritmo apriori para generar las reglas de asociación.</p>
<p>Para generar las reglas, usaré un soporte de 0,1 (para que las reglas generadas tengan un mínimo razonable de apariciones en los datos) y una confianza del 90% (para extraer únicamente reglas precisas):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar reglas de asociación con suporte = 0,1 y confianza = 0,9</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>reglas <span class="ot">&lt;-</span> <span class="fu">apriori</span>(Tdatos, <span class="fu">list</span>(<span class="at">supp=</span><span class="fl">0.1</span>, <span class="at">conf=</span><span class="fl">0.9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Apriori

Parameter specification:
 confidence minval smax arem  aval originalSupport maxtime support minlen
        0.9    0.1    1 none FALSE            TRUE       5     0.1      1
 maxlen target  ext
     10  rules TRUE

Algorithmic control:
 filter tree heap memopt load sort verbose
    0.1 TRUE TRUE  FALSE TRUE    2    TRUE

Absolute minimum support count: 57 

set item appearances ...[0 item(s)] done [0.00s].
set transactions ...[48 item(s), 576 transaction(s)] done [0.00s].
sorting and recoding items ... [38 item(s)] done [0.00s].
creating transaction tree ... done [0.00s].
checking subsets of size 1 2 3 4 5 6 7 8 done [0.00s].
writing ... [3230 rule(s)] done [0.00s].
creating S4 object  ... done [0.00s].</code></pre>
</div>
</div>
<p>Veamos cuántas reglas hay con soporte = 0,1 y confianza = 0,9:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Número de reglas con soporte = 0,1 y confianza = 0,9</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3230</code></pre>
</div>
</div>
<p>Un paso necesario al generar reglas es eliminar las redundantes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminar reglas redundantes</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>indices_no_redundantes <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="sc">!</span><span class="fu">is.redundant</span>(reglas))</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>reglas <span class="ot">&lt;-</span> reglas[indices_no_redundantes]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Veamos cuántas reglas sin redundancia hay:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Número de reglas sin redundancia</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 305</code></pre>
</div>
</div>
<p>Ahora, quedémonos únicamente con las reglas estadísticamente significativas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>indices_significativos <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">is.significant</span>(reglas))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>reglas <span class="ot">&lt;-</span> reglas[indices_significativos]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Veamos cuántas reglas significativas hay:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Número de reglas significativas</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 237</code></pre>
</div>
</div>
<p>Un parámetro muy importante para las reglas de asociación es el lift, ya que, si este dato es superior a 1, significa que el antecedente y el consecuente tienden a ocurrir juntos más frecuentemente de lo que se esperaría por azar. Es decir, un lift de 3 significa que el antecedente hace que el consecuente sea 3 veces más probable que ocurra.</p>
<p>También nos interesa el count, es decir, el número de casos en los que esa regla se cumple. Ya hemos aplicado el filtro de soporte al crear las reglas, pero, por si acaso, establezcamos también un count mínimo de 50.</p>
<p>Apliquemos ambos filtros:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>reglas <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas, <span class="at">subset =</span> lift <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> count <span class="sc">&gt;</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Veamos cuántas reglas con lift &gt; 1 y count &gt; 50 hay:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Número de reglas con lift &gt; 1 y count &gt; 50</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 237</code></pre>
</div>
</div>
<p>El número de reglas no ha disminuido, lo que sugiere que los filtros anteriores se han encargado de desechar las reglas con lift &lt;= 1 y count &lt;= 50.</p>
<p>Echemos un vistazo a las primeras 15 reglas, ordenadas por confianza:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar las 20 primeras reglas</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>reglas <span class="ot">&lt;-</span> <span class="fu">sort</span>(reglas, <span class="at">by=</span><span class="st">"confidence"</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                      rhs                              support confidence  coverage     lift count
[1]  {followers=[26,49)}                   =&gt; {external_URL=0}               0.1006944          1 0.1006944 1.131631    58
[2]  {followers=[2.58e+03,1.53e+07]}       =&gt; {nums.length_fullname=[0,0.2)} 0.1006944          1 0.1006944 1.095057    58
[3]  {followers=[0,10.5)}                  =&gt; {external_URL=0}               0.1006944          1 0.1006944 1.131631    58
[4]  {external_URL=1}                      =&gt; {fake=0}                       0.1163194          1 0.1163194 2.000000    67
[5]  {external_URL=1}                      =&gt; {profile_pic=1}                0.1163194          1 0.1163194 1.425743    67
[6]  {posts=[187,7.39e+03]}                =&gt; {profile_pic=1}                0.1440972          1 0.1440972 1.425743    83
[7]  {nums.length_username=[0.184,0.368)}  =&gt; {external_URL=0}               0.1857639          1 0.1857639 1.131631   107
[8]  {posts=[0,1)}                         =&gt; {external_URL=0}               0.2725694          1 0.2725694 1.131631   157
[9]  {profile_pic=0}                       =&gt; {external_URL=0}               0.2986111          1 0.2986111 1.131631   172
[10] {fullname_words=[2,12]}               =&gt; {name..username=0}             0.4097222          1 0.4097222 1.035971   236
[11] {fake=1}                              =&gt; {external_URL=0}               0.5000000          1 0.5000000 1.131631   288
[12] {nums.length_username=[0,0.184),                                                                                     
      external_URL=1}                      =&gt; {nums.length_fullname=[0,0.2)} 0.1128472          1 0.1128472 1.095057    65
[13] {nums.length_username=[0.368,0.552),                                                                                 
      description_length=[0,5)}            =&gt; {fake=1}                       0.1163194          1 0.1163194 2.000000    67
[14] {nums.length_username=[0.368,0.552),                                                                                 
      description_length=[0,5)}            =&gt; {external_URL=0}               0.1163194          1 0.1163194 1.131631    67
[15] {profile_pic=0,                                                                                                      
      follows=[0,26)}                      =&gt; {fake=1}                       0.1041667          1 0.1041667 2.000000    60
[16] {description_length=[0,5),                                                                                           
      follows=[0,26)}                      =&gt; {external_URL=0}               0.1215278          1 0.1215278 1.131631    70
[17] {posts=[17.6,63.7),                                                                                                  
      fake=0}                              =&gt; {profile_pic=1}                0.1059028          1 0.1059028 1.425743    61
[18] {posts=[17.6,63.7),                                                                                                  
      fake=0}                              =&gt; {nums.length_fullname=[0,0.2)} 0.1059028          1 0.1059028 1.095057    61
[19] {nums.length_username=[0,0.184),                                                                                     
      posts=[17.6,63.7)}                   =&gt; {profile_pic=1}                0.1111111          1 0.1111111 1.425743    64
[20] {follows=[521,904),                                                                                                  
      fake=0}                              =&gt; {profile_pic=1}                0.1059028          1 0.1059028 1.425743    61</code></pre>
</div>
</div>
<p>Como vemos, las 20 reglas tienen 100% de confianza, y gracias a los filtros, tienen también buenos valores de lift y coverage.</p>
<p>Veamos cuántas reglas tienen un 100% de confianza:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>reglas_confianza <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas, confidence <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas_confianza)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 55</code></pre>
</div>
</div>
<p>Hay 55 reglas que son perfectamente precisas, es decir, que si aparece el antecedente, el consecuente también se cumple en el 100% de los casos.</p>
<p>Una vez examinadas algunas características generales de las reglas, es el momento de quedarnos con las reglas realmente importantes para este proyecto, es decir, las que involucran al parámetro “fake”. Nuestro objetivo actual es, pues, determinar qué parámetros son determinantes para decidir si una cuenta es falsa o verdadera (parámetro “fake” en el consecuente), así como analizar qué patrones suelen cumplirse en las cuentas falsas o verdaderas (parámetro “fake” en el antecedente).</p>
<p>Comencemos con el primer enfoque:</p>
</section>
<section id="qué-parámetros-deciden-si-una-cuenta-es-verdadera-o-falsa" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="qué-parámetros-deciden-si-una-cuenta-es-verdadera-o-falsa"><span class="header-section-number">3.1.2</span> ¿Qué parámetros deciden si una cuenta es verdadera o falsa?</h3>
<p>Para encontrar las variables o conjuntos de variables que, en nuestro dataset, determinan si una cuenta es verdadera o falsa con total o casi total seguridad, es necesario encontrar las reglas que presenten el parámetro fake en su consecuente.</p>
<p>Para cuentas falsas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>reglas_fake <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas, <span class="at">subset =</span> rhs <span class="sc">%in%</span> <span class="st">"fake=1"</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas_fake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 21</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_fake)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                      rhs        support confidence  coverage     lift count
[1]  {nums.length_username=[0.368,0.552),                                                           
      description_length=[0,5)}            =&gt; {fake=1} 0.1163194  1.0000000 0.1163194 2.000000    67
[2]  {profile_pic=0,                                                                                
      follows=[0,26)}                      =&gt; {fake=1} 0.1041667  1.0000000 0.1041667 2.000000    60
[3]  {profile_pic=0,                                                                                
      posts=[0,1)}                         =&gt; {fake=1} 0.2152778  1.0000000 0.2152778 2.000000   124
[4]  {profile_pic=0,                                                                                
      description_length=[0,5)}            =&gt; {fake=1} 0.2847222  1.0000000 0.2847222 2.000000   164
[5]  {profile_pic=0,                                                                                
      private=0}                           =&gt; {fake=1} 0.2100694  1.0000000 0.2100694 2.000000   121
[6]  {fullname_words=[1,2),                                                                         
      description_length=[0,5),                                                                     
      posts=[0,1)}                         =&gt; {fake=1} 0.1875000  1.0000000 0.1875000 2.000000   108
[7]  {fullname_words=[1,2),                                                                         
      private=0,                                                                                    
      posts=[0,1)}                         =&gt; {fake=1} 0.1284722  1.0000000 0.1284722 2.000000    74
[8]  {profile_pic=0,                                                                                
      fullname_words=[1,2)}                =&gt; {fake=1} 0.2239583  0.9923077 0.2256944 1.984615   129
[9]  {fullname_words=[1,2),                                                                         
      posts=[0,1)}                         =&gt; {fake=1} 0.1927083  0.9910714 0.1944444 1.982143   111
[10] {profile_pic=0}                       =&gt; {fake=1} 0.2951389  0.9883721 0.2986111 1.976744   170
[11] {nums.length_username=[0.368,0.552),                                                           
      external_URL=0}                      =&gt; {fake=1} 0.1232639  0.9861111 0.1250000 1.972222    71
[12] {private=0,                                                                                    
      posts=[0,1)}                         =&gt; {fake=1} 0.1770833  0.9807692 0.1805556 1.961538   102
[13] {description_length=[0,5),                                                                     
      posts=[0,1)}                         =&gt; {fake=1} 0.2569444  0.9801325 0.2621528 1.960265   148
[14] {posts=[0,1)}                         =&gt; {fake=1} 0.2656250  0.9745223 0.2725694 1.949045   153
[15] {nums.length_username=[0.368,0.552),                                                           
      fullname_words=[1,2)}                =&gt; {fake=1} 0.1006944  0.9666667 0.1041667 1.933333    58
[16] {nums.length_username=[0.368,0.552)}  =&gt; {fake=1} 0.1232639  0.9594595 0.1284722 1.918919    71
[17] {nums.length_username=[0.184,0.368),                                                           
      fullname_words=[1,2),                                                                         
      description_length=[0,5)}            =&gt; {fake=1} 0.1041667  0.9523810 0.1093750 1.904762    60
[18] {fullname_words=[1,2),                                                                         
      follows=[26,71)}                     =&gt; {fake=1} 0.1006944  0.9508197 0.1059028 1.901639    58
[19] {description_length=[0,5),                                                                     
      follows=[0,26)}                      =&gt; {fake=1} 0.1145833  0.9428571 0.1215278 1.885714    66
[20] {nums.length_username=[0.184,0.368),                                                           
      fullname_words=[1,2)}                =&gt; {fake=1} 0.1163194  0.9178082 0.1267361 1.835616    67
[21] {external_URL=0,                                                                               
      follows=[0,26)}                      =&gt; {fake=1} 0.1215278  0.9090909 0.1336806 1.818182    70</code></pre>
</div>
</div>
<p>Y para cuentas verdaderas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>reglas_verdaderas <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas, <span class="at">subset =</span> rhs <span class="sc">%in%</span> <span class="st">"fake=0"</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas_verdaderas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 29</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_verdaderas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                  rhs        support confidence  coverage     lift count
[1]  {external_URL=1}                  =&gt; {fake=0} 0.1163194  1.0000000 0.1163194 2.000000    67
[2]  {fullname_words=[2,12],                                                                    
      posts=[187,7.39e+03]}            =&gt; {fake=0} 0.1006944  1.0000000 0.1006944 2.000000    58
[3]  {private=0,                                                                                
      posts=[187,7.39e+03]}            =&gt; {fake=0} 0.1180556  1.0000000 0.1180556 2.000000    68
[4]  {nums.length_username=[0,0.184),                                                           
      posts=[187,7.39e+03]}            =&gt; {fake=0} 0.1336806  1.0000000 0.1336806 2.000000    77
[5]  {profile_pic=1,                                                                            
      nums.length_username=[0,0.184),                                                           
      fullname_words=[2,12],                                                                    
      nums.length_fullname=[0,0.2),                                                             
      private=1}                       =&gt; {fake=0} 0.1128472  1.0000000 0.1128472 2.000000    65
[6]  {posts=[187,7.39e+03]}            =&gt; {fake=0} 0.1423611  0.9879518 0.1440972 1.975904    82
[7]  {profile_pic=1,                                                                            
      nums.length_username=[0,0.184),                                                           
      fullname_words=[2,12],                                                                    
      private=1}                       =&gt; {fake=0} 0.1145833  0.9850746 0.1163194 1.970149    66
[8]  {profile_pic=1,                                                                            
      fullname_words=[2,12],                                                                    
      description_length=[43,150]}     =&gt; {fake=0} 0.1354167  0.9750000 0.1388889 1.950000    78
[9]  {nums.length_username=[0,0.184),                                                           
      fullname_words=[2,12],                                                                    
      description_length=[43,150]}     =&gt; {fake=0} 0.1267361  0.9733333 0.1302083 1.946667    73
[10] {profile_pic=1,                                                                            
      fullname_words=[2,12],                                                                    
      nums.length_fullname=[0,0.2),                                                             
      private=1}                       =&gt; {fake=0} 0.1163194  0.9710145 0.1197917 1.942029    67
[11] {fullname_words=[2,12],                                                                    
      description_length=[43,150],                                                              
      private=0}                       =&gt; {fake=0} 0.1041667  0.9677419 0.1076389 1.935484    60
[12] {profile_pic=1,                                                                            
      nums.length_username=[0,0.184),                                                           
      follows=[521,904)}               =&gt; {fake=0} 0.1006944  0.9666667 0.1041667 1.933333    58
[13] {fullname_words=[2,12],                                                                    
      description_length=[43,150]}     =&gt; {fake=0} 0.1354167  0.9629630 0.1406250 1.925926    78
[14] {profile_pic=1,                                                                            
      fullname_words=[2,12],                                                                    
      private=1}                       =&gt; {fake=0} 0.1180556  0.9577465 0.1232639 1.915493    68
[15] {profile_pic=1,                                                                            
      nums.length_username=[0,0.184),                                                           
      name..username=0,                                                                         
      description_length=[5,43)}       =&gt; {fake=0} 0.1406250  0.9529412 0.1475694 1.905882    81
[16] {nums.length_username=[0,0.184),                                                           
      posts=[63.7,187)}                =&gt; {fake=0} 0.1215278  0.9459459 0.1284722 1.891892    70
[17] {profile_pic=1,                                                                            
      nums.length_username=[0,0.184),                                                           
      fullname_words=[2,12],                                                                    
      nums.length_fullname=[0,0.2)}    =&gt; {fake=0} 0.2951389  0.9444444 0.3125000 1.888889   170
[18] {profile_pic=1,                                                                            
      nums.length_username=[0,0.184),                                                           
      description_length=[5,43)}       =&gt; {fake=0} 0.1406250  0.9418605 0.1493056 1.883721    81
[19] {profile_pic=1,                                                                            
      nums.length_username=[0,0.184),                                                           
      fullname_words=[2,12]}           =&gt; {fake=0} 0.2968750  0.9395604 0.3159722 1.879121   171
[20] {nums.length_username=[0,0.184),                                                           
      description_length=[43,150],                                                              
      private=0}                       =&gt; {fake=0} 0.1284722  0.9367089 0.1371528 1.873418    74
[21] {nums.length_username=[0,0.184),                                                           
      description_length=[43,150]}     =&gt; {fake=0} 0.1718750  0.9339623 0.1840278 1.867925    99
[22] {nums.length_username=[0,0.184),                                                           
      name..username=0,                                                                         
      description_length=[5,43)}       =&gt; {fake=0} 0.1440972  0.9325843 0.1545139 1.865169    83
[23] {description_length=[43,150],                                                              
      private=0}                       =&gt; {fake=0} 0.1406250  0.9310345 0.1510417 1.862069    81
[24] {nums.length_username=[0,0.184),                                                           
      description_length=[5,43)}       =&gt; {fake=0} 0.1440972  0.9222222 0.1562500 1.844444    83
[25] {nums.length_username=[0,0.184),                                                           
      fullname_words=[2,12],                                                                    
      nums.length_fullname=[0,0.2),                                                             
      private=1}                       =&gt; {fake=0} 0.1128472  0.9154930 0.1232639 1.830986    65
[26] {profile_pic=1,                                                                            
      description_length=[43,150]}     =&gt; {fake=0} 0.1857639  0.9145299 0.2031250 1.829060   107
[27] {profile_pic=1,                                                                            
      nums.length_fullname=[0,0.2),                                                             
      follows=[521,904)}               =&gt; {fake=0} 0.1041667  0.9090909 0.1145833 1.818182    60
[28] {nums.length_fullname=[0,0.2),                                                             
      description_length=[43,150]}     =&gt; {fake=0} 0.1805556  0.9043478 0.1996528 1.808696   104
[29] {nums.length_username=[0,0.184),                                                           
      fullname_words=[2,12],                                                                    
      private=1}                       =&gt; {fake=0} 0.1145833  0.9041096 0.1267361 1.808219    66</code></pre>
</div>
</div>
<p>Como podemos observar, han quedado 21 reglas con fake=1 en el consecuente (cuentas falsas), y 29 reglas con fake=0 en el consecuente (cuentas verdaderas). Para analizar algunas reglas interesantes, primero combinemos ambos conjuntos de reglas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinar ambas selecciones</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>reglas_fake_verdaderas <span class="ot">&lt;-</span> <span class="fu">c</span>(reglas_fake, reglas_verdaderas)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas_fake_verdaderas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50</code></pre>
</div>
</div>
<p>Por la longitud, sabemos que la combinación de las reglas ha sido exitosa. Ahora sí, analicemos las reglas.</p>
<p>En primer lugar, veamos si existen reglas con una sola variable en el antecedente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>reglas_fv_1left <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas_fake_verdaderas, <span class="fu">size</span>(lhs) <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas_fv_1left)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>reglas_fv_1left <span class="ot">&lt;-</span> <span class="fu">sort</span>(reglas_fv_1left, <span class="at">by=</span><span class="st">"confidence"</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_fv_1left)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                                     rhs      support   confidence
[1] {external_URL=1}                     =&gt; {fake=0} 0.1163194 1.0000000 
[2] {profile_pic=0}                      =&gt; {fake=1} 0.2951389 0.9883721 
[3] {posts=[187,7.39e+03]}               =&gt; {fake=0} 0.1423611 0.9879518 
[4] {posts=[0,1)}                        =&gt; {fake=1} 0.2656250 0.9745223 
[5] {nums.length_username=[0.368,0.552)} =&gt; {fake=1} 0.1232639 0.9594595 
    coverage  lift     count
[1] 0.1163194 2.000000  67  
[2] 0.2986111 1.976744 170  
[3] 0.1440972 1.975904  82  
[4] 0.2725694 1.949045 153  
[5] 0.1284722 1.918919  71  </code></pre>
</div>
</div>
<p>Comentemos las reglas obtenidas:</p>
<ol type="1">
<li><p>Como vemos, sólo una de estas reglas posee plena confianza, y, de hecho, la conocíamos con anterioridad: ya dijimos que, en este dataset, no había cuentas falsas con URL externa. Por lo tanto, si una cuenta tiene URL externa, será verdadera.</p></li>
<li><p>También mencionamos que la ausencia de foto de perfil llevaba a pensar en una cuenta falsa. Ahora lo podemos afirmar con una confianza del 98,83%.</p></li>
<li><p>Otra conclusión ya vista es la de que un número alto de publicaciones normalmente conduce a una cuenta verdadera. La confianza cuando el valor de publicaciones está entre 188 y 7390 (es el intervalo más alto) es del 98,79%.</p></li>
<li><p>Al igual que con la foto de perfil, la ausencia de publicaciones llevaba a pensar en cuentas falsas. En este caso, el intervalo es de 0-1 publicaciones, y nos garantiza falsedad de la cuenta en el 97,45% de los casos.</p></li>
<li><p>Esta regla es algo más extraña. El intervalo intermedio de valores del ratio de números en la longitud del username indica que la cuenta es falsa con confianza del 95%. Ya vimos, en la visualización, que los valores altos de esta variable aparecían en las cuentas falsas, con lo que probablemente los intervalos superiores aparecerán en los conjuntos de reglas con más de una variable en el antecedente.</p></li>
</ol>
<p>A continuación veremos todas estas reglas, y comentaremos las más llamativas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>reglas_fake_verdaderas <span class="ot">&lt;-</span> <span class="fu">sort</span>(reglas_fake_verdaderas, <span class="at">by=</span><span class="st">"confidence"</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_fake_verdaderas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                      rhs        support confidence  coverage     lift count
[1]  {nums.length_username=[0.368,0.552),                                                           
      description_length=[0,5)}            =&gt; {fake=1} 0.1163194  1.0000000 0.1163194 2.000000    67
[2]  {profile_pic=0,                                                                                
      follows=[0,26)}                      =&gt; {fake=1} 0.1041667  1.0000000 0.1041667 2.000000    60
[3]  {profile_pic=0,                                                                                
      posts=[0,1)}                         =&gt; {fake=1} 0.2152778  1.0000000 0.2152778 2.000000   124
[4]  {profile_pic=0,                                                                                
      description_length=[0,5)}            =&gt; {fake=1} 0.2847222  1.0000000 0.2847222 2.000000   164
[5]  {profile_pic=0,                                                                                
      private=0}                           =&gt; {fake=1} 0.2100694  1.0000000 0.2100694 2.000000   121
[6]  {fullname_words=[1,2),                                                                         
      description_length=[0,5),                                                                     
      posts=[0,1)}                         =&gt; {fake=1} 0.1875000  1.0000000 0.1875000 2.000000   108
[7]  {fullname_words=[1,2),                                                                         
      private=0,                                                                                    
      posts=[0,1)}                         =&gt; {fake=1} 0.1284722  1.0000000 0.1284722 2.000000    74
[8]  {external_URL=1}                      =&gt; {fake=0} 0.1163194  1.0000000 0.1163194 2.000000    67
[9]  {fullname_words=[2,12],                                                                        
      posts=[187,7.39e+03]}                =&gt; {fake=0} 0.1006944  1.0000000 0.1006944 2.000000    58
[10] {private=0,                                                                                    
      posts=[187,7.39e+03]}                =&gt; {fake=0} 0.1180556  1.0000000 0.1180556 2.000000    68
[11] {nums.length_username=[0,0.184),                                                               
      posts=[187,7.39e+03]}                =&gt; {fake=0} 0.1336806  1.0000000 0.1336806 2.000000    77
[12] {profile_pic=1,                                                                                
      nums.length_username=[0,0.184),                                                               
      fullname_words=[2,12],                                                                        
      nums.length_fullname=[0,0.2),                                                                 
      private=1}                           =&gt; {fake=0} 0.1128472  1.0000000 0.1128472 2.000000    65
[13] {profile_pic=0,                                                                                
      fullname_words=[1,2)}                =&gt; {fake=1} 0.2239583  0.9923077 0.2256944 1.984615   129
[14] {fullname_words=[1,2),                                                                         
      posts=[0,1)}                         =&gt; {fake=1} 0.1927083  0.9910714 0.1944444 1.982143   111
[15] {profile_pic=0}                       =&gt; {fake=1} 0.2951389  0.9883721 0.2986111 1.976744   170
[16] {posts=[187,7.39e+03]}                =&gt; {fake=0} 0.1423611  0.9879518 0.1440972 1.975904    82
[17] {nums.length_username=[0.368,0.552),                                                           
      external_URL=0}                      =&gt; {fake=1} 0.1232639  0.9861111 0.1250000 1.972222    71
[18] {profile_pic=1,                                                                                
      nums.length_username=[0,0.184),                                                               
      fullname_words=[2,12],                                                                        
      private=1}                           =&gt; {fake=0} 0.1145833  0.9850746 0.1163194 1.970149    66
[19] {private=0,                                                                                    
      posts=[0,1)}                         =&gt; {fake=1} 0.1770833  0.9807692 0.1805556 1.961538   102
[20] {description_length=[0,5),                                                                     
      posts=[0,1)}                         =&gt; {fake=1} 0.2569444  0.9801325 0.2621528 1.960265   148
[21] {profile_pic=1,                                                                                
      fullname_words=[2,12],                                                                        
      description_length=[43,150]}         =&gt; {fake=0} 0.1354167  0.9750000 0.1388889 1.950000    78
[22] {posts=[0,1)}                         =&gt; {fake=1} 0.2656250  0.9745223 0.2725694 1.949045   153
[23] {nums.length_username=[0,0.184),                                                               
      fullname_words=[2,12],                                                                        
      description_length=[43,150]}         =&gt; {fake=0} 0.1267361  0.9733333 0.1302083 1.946667    73
[24] {profile_pic=1,                                                                                
      fullname_words=[2,12],                                                                        
      nums.length_fullname=[0,0.2),                                                                 
      private=1}                           =&gt; {fake=0} 0.1163194  0.9710145 0.1197917 1.942029    67
[25] {fullname_words=[2,12],                                                                        
      description_length=[43,150],                                                                  
      private=0}                           =&gt; {fake=0} 0.1041667  0.9677419 0.1076389 1.935484    60
[26] {nums.length_username=[0.368,0.552),                                                           
      fullname_words=[1,2)}                =&gt; {fake=1} 0.1006944  0.9666667 0.1041667 1.933333    58
[27] {profile_pic=1,                                                                                
      nums.length_username=[0,0.184),                                                               
      follows=[521,904)}                   =&gt; {fake=0} 0.1006944  0.9666667 0.1041667 1.933333    58
[28] {fullname_words=[2,12],                                                                        
      description_length=[43,150]}         =&gt; {fake=0} 0.1354167  0.9629630 0.1406250 1.925926    78
[29] {nums.length_username=[0.368,0.552)}  =&gt; {fake=1} 0.1232639  0.9594595 0.1284722 1.918919    71
[30] {profile_pic=1,                                                                                
      fullname_words=[2,12],                                                                        
      private=1}                           =&gt; {fake=0} 0.1180556  0.9577465 0.1232639 1.915493    68
[31] {profile_pic=1,                                                                                
      nums.length_username=[0,0.184),                                                               
      name..username=0,                                                                             
      description_length=[5,43)}           =&gt; {fake=0} 0.1406250  0.9529412 0.1475694 1.905882    81
[32] {nums.length_username=[0.184,0.368),                                                           
      fullname_words=[1,2),                                                                         
      description_length=[0,5)}            =&gt; {fake=1} 0.1041667  0.9523810 0.1093750 1.904762    60
[33] {fullname_words=[1,2),                                                                         
      follows=[26,71)}                     =&gt; {fake=1} 0.1006944  0.9508197 0.1059028 1.901639    58
[34] {nums.length_username=[0,0.184),                                                               
      posts=[63.7,187)}                    =&gt; {fake=0} 0.1215278  0.9459459 0.1284722 1.891892    70
[35] {profile_pic=1,                                                                                
      nums.length_username=[0,0.184),                                                               
      fullname_words=[2,12],                                                                        
      nums.length_fullname=[0,0.2)}        =&gt; {fake=0} 0.2951389  0.9444444 0.3125000 1.888889   170
[36] {description_length=[0,5),                                                                     
      follows=[0,26)}                      =&gt; {fake=1} 0.1145833  0.9428571 0.1215278 1.885714    66
[37] {profile_pic=1,                                                                                
      nums.length_username=[0,0.184),                                                               
      description_length=[5,43)}           =&gt; {fake=0} 0.1406250  0.9418605 0.1493056 1.883721    81
[38] {profile_pic=1,                                                                                
      nums.length_username=[0,0.184),                                                               
      fullname_words=[2,12]}               =&gt; {fake=0} 0.2968750  0.9395604 0.3159722 1.879121   171
[39] {nums.length_username=[0,0.184),                                                               
      description_length=[43,150],                                                                  
      private=0}                           =&gt; {fake=0} 0.1284722  0.9367089 0.1371528 1.873418    74
[40] {nums.length_username=[0,0.184),                                                               
      description_length=[43,150]}         =&gt; {fake=0} 0.1718750  0.9339623 0.1840278 1.867925    99
[41] {nums.length_username=[0,0.184),                                                               
      name..username=0,                                                                             
      description_length=[5,43)}           =&gt; {fake=0} 0.1440972  0.9325843 0.1545139 1.865169    83
[42] {description_length=[43,150],                                                                  
      private=0}                           =&gt; {fake=0} 0.1406250  0.9310345 0.1510417 1.862069    81
[43] {nums.length_username=[0,0.184),                                                               
      description_length=[5,43)}           =&gt; {fake=0} 0.1440972  0.9222222 0.1562500 1.844444    83
[44] {nums.length_username=[0.184,0.368),                                                           
      fullname_words=[1,2)}                =&gt; {fake=1} 0.1163194  0.9178082 0.1267361 1.835616    67
[45] {nums.length_username=[0,0.184),                                                               
      fullname_words=[2,12],                                                                        
      nums.length_fullname=[0,0.2),                                                                 
      private=1}                           =&gt; {fake=0} 0.1128472  0.9154930 0.1232639 1.830986    65
[46] {profile_pic=1,                                                                                
      description_length=[43,150]}         =&gt; {fake=0} 0.1857639  0.9145299 0.2031250 1.829060   107
[47] {external_URL=0,                                                                               
      follows=[0,26)}                      =&gt; {fake=1} 0.1215278  0.9090909 0.1336806 1.818182    70
[48] {profile_pic=1,                                                                                
      nums.length_fullname=[0,0.2),                                                                 
      follows=[521,904)}                   =&gt; {fake=0} 0.1041667  0.9090909 0.1145833 1.818182    60
[49] {nums.length_fullname=[0,0.2),                                                                 
      description_length=[43,150]}         =&gt; {fake=0} 0.1805556  0.9043478 0.1996528 1.808696   104
[50] {nums.length_username=[0,0.184),                                                               
      fullname_words=[2,12],                                                                        
      private=1}                           =&gt; {fake=0} 0.1145833  0.9041096 0.1267361 1.808219    66</code></pre>
</div>
</div>
<p>Para extraer las conclusiones generales de estas 50 reglas, analicemos la frecuencia de aparición de los antecedentes, empezando con las cuentas falsas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionar reglas donde rhs es "fake=1"</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>reglas_fake_rhs <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas, <span class="at">subset =</span> rhs <span class="sc">%in%</span> <span class="st">"fake=1"</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir los antecedentes a una lista</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>antecedentes_lista_f <span class="ot">&lt;-</span> <span class="fu">as</span>(<span class="fu">lhs</span>(reglas_fake_rhs), <span class="st">"list"</span>)</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una tabla de frecuencias</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>frecuencia_ant_f <span class="ot">&lt;-</span> <span class="fu">table</span>(<span class="fu">unlist</span>(antecedentes_lista_f))</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenar la tabla de frecuencias de forma descendente</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>frecuencia_ant_f_ordenada <span class="ot">&lt;-</span> <span class="fu">sort</span>(frecuencia_ant_f, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>frecuencia_ant_f_ordenada</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
              fullname_words=[1,2)                        posts=[0,1) 
                                 8                                  7 
          description_length=[0,5)                      profile_pic=0 
                                 6                                  6 
nums.length_username=[0.368,0.552)                     follows=[0,26) 
                                 4                                  3 
                         private=0                     external_URL=0 
                                 3                                  2 
nums.length_username=[0.184,0.368)                    follows=[26,71) 
                                 2                                  1 </code></pre>
</div>
</div>
<p>Podemos afirmar con una seguridad considerable que una cuenta es falsa cuando identificamos ciertas combinaciones de estas características:</p>
<ul>
<li>Pocas palabras en el nombre completo</li>
<li>Pocas o nulas publicaciones</li>
<li>Descripción vacía o muy breve</li>
<li>Ausencia de foto de perfil</li>
<li>Ratio de números en la longitud del username entre 0,184 y 0,552</li>
<li>Pocos o nulos seguidos</li>
<li>Cuenta pública</li>
<li>Ausencia de URL externa</li>
</ul>
<p>Ahora veamos la frecuencia de aparición de los antecedentes para cuentas verdaderas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionar reglas donde rhs es "fake=0"</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>reglas_verdaderas_rhs <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas, <span class="at">subset =</span> rhs <span class="sc">%in%</span> <span class="st">"fake=0"</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir los antecedentes a una lista</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>antecedentes_lista_v <span class="ot">&lt;-</span> <span class="fu">as</span>(<span class="fu">lhs</span>(reglas_verdaderas_rhs), <span class="st">"list"</span>)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una tabla de frecuencias</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>frecuencia_ant_v <span class="ot">&lt;-</span> <span class="fu">table</span>(<span class="fu">unlist</span>(antecedentes_lista_v))</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordenar la tabla de frecuencias de forma descendente</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>frecuencia_ant_v_ordenada <span class="ot">&lt;-</span> <span class="fu">sort</span>(frecuencia_ant_v, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>frecuencia_ant_v_ordenada</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
nums.length_username=[0,0.184)          fullname_words=[2,12] 
                            16                             13 
                 profile_pic=1    description_length=[43,150] 
                            12                              9 
  nums.length_fullname=[0,0.2)                      private=1 
                             6                              6 
     description_length=[5,43)           posts=[187,7.39e+03] 
                             4                              4 
                     private=0              follows=[521,904) 
                             4                              2 
              name..username=0                 external_URL=1 
                             2                              1 
              posts=[63.7,187) 
                             1 </code></pre>
</div>
</div>
<p>Podemos afirmar con una seguridad considerable que una cuenta es verdadera cuando identificamos ciertas combinaciones de estas características:</p>
<ul>
<li>Ratio de números en la longitud del username entre 0 y 0,184</li>
<li>Cantidad considerable de palabras en el nombre completo</li>
<li>Presencia de foto de perfil</li>
<li>Descripción detallada</li>
<li>Ratio de números en la longitud del nombre completo entre 0 y 0,2</li>
<li>Cuenta privada *</li>
<li>Número alto de publicaciones</li>
<li>Cuenta pública *</li>
<li>Número alto de seguidos</li>
<li>Ausencia de coincidencia entre nombre completo y nombre de usuario</li>
<li>Presencia de URL externa</li>
</ul>
<p>Sorprende la ausencia en los antecedentes del número alto de seguidores.</p>
<ul>
<li>* Nota: es un ejemplo de variable que por sí sola no decide nada, pero que combinada con otras puede dar lugar a una conclusión o a otra. Recomiendo fijarse en la variable private en las siguientes reglas:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(<span class="fu">c</span>(reglas_fake_verdaderas[<span class="dv">5</span>], reglas_fake_verdaderas[<span class="dv">10</span>], reglas_fake_verdaderas[<span class="dv">18</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    lhs                                  rhs        support confidence  coverage     lift count
[1] {profile_pic=0,                                                                            
     private=0}                       =&gt; {fake=1} 0.2100694  1.0000000 0.2100694 2.000000   121
[2] {private=0,                                                                                
     posts=[187,7.39e+03]}            =&gt; {fake=0} 0.1180556  1.0000000 0.1180556 2.000000    68
[3] {profile_pic=1,                                                                            
     nums.length_username=[0,0.184),                                                           
     fullname_words=[2,12],                                                                    
     private=1}                       =&gt; {fake=0} 0.1145833  0.9850746 0.1163194 1.970149    66</code></pre>
</div>
</div>
</section>
<section id="predicción" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="predicción"><span class="header-section-number">3.1.3</span> Predicción</h3>
<p>Una vez llegados aquí, habiendo analizado las reglas de asociación del dataset de entrenamiento, es momento de probar la calidad de las reglas con el dataset de test.</p>
<p>Debemos comenzar discretizando los valores del dataset de test con los mismos intervalos que usamos en el dataset de entrenamiento, ya que las reglas que vamos a usar poseen estos intervalos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir dataset de test a data frame</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>datos_testDF <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(datos_test)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datos_test)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar la columna fake en una variable aparte, para poder compararla al final con la predicción</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>fake_originales <span class="ot">&lt;-</span> datos_testDF<span class="sc">$</span>fake</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminar la columna fake</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>datos_testDF<span class="sc">$</span>fake <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datos_testDF)</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Discretizar columnas numéricas con los mismos intervalos que en el dataset de entrenamiento</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterar sobre cada fila de datos_testDF</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(datos_testDF)) {</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Para nums.length_username</span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datos_testDF[i, <span class="st">"nums.length_username"</span>] <span class="sc">&lt;</span> <span class="fl">0.184</span>) {</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_username"</span>] <span class="ot">&lt;-</span> <span class="st">"[0,0.184)"</span></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"nums.length_username"</span>] <span class="sc">&lt;</span> <span class="fl">0.368</span>) {</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_username"</span>] <span class="ot">&lt;-</span> <span class="st">"[0.184,0.368)"</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"nums.length_username"</span>] <span class="sc">&lt;</span> <span class="fl">0.552</span>) {</span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_username"</span>] <span class="ot">&lt;-</span> <span class="st">"[0.368,0.552)"</span></span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"nums.length_username"</span>] <span class="sc">&lt;</span> <span class="fl">0.736</span>) {</span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_username"</span>] <span class="ot">&lt;-</span> <span class="st">"[0.552,0.736)"</span></span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_username"</span>] <span class="ot">&lt;-</span> <span class="st">"[0.736,0.92]"</span></span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Para fullname_words</span></span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datos_testDF[i, <span class="st">"fullname_words"</span>] <span class="sc">&lt;</span> <span class="dv">1</span>) {</span>
<span id="cb61-33"><a href="#cb61-33" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"fullname_words"</span>] <span class="ot">&lt;-</span> <span class="st">"[0,1)"</span></span>
<span id="cb61-34"><a href="#cb61-34" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"fullname_words"</span>] <span class="sc">&lt;</span> <span class="dv">2</span>) {</span>
<span id="cb61-35"><a href="#cb61-35" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"fullname_words"</span>] <span class="ot">&lt;-</span> <span class="st">"[1,2)"</span></span>
<span id="cb61-36"><a href="#cb61-36" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb61-37"><a href="#cb61-37" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"fullname_words"</span>] <span class="ot">&lt;-</span> <span class="st">"[2,12]"</span></span>
<span id="cb61-38"><a href="#cb61-38" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-39"><a href="#cb61-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-40"><a href="#cb61-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Para nums.length_fullname</span></span>
<span id="cb61-41"><a href="#cb61-41" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datos_testDF[i, <span class="st">"nums.length_fullname"</span>] <span class="sc">&lt;</span> <span class="fl">0.2</span>) {</span>
<span id="cb61-42"><a href="#cb61-42" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_fullname"</span>] <span class="ot">&lt;-</span> <span class="st">"[0,0.2)"</span></span>
<span id="cb61-43"><a href="#cb61-43" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"nums.length_fullname"</span>] <span class="sc">&lt;</span> <span class="fl">0.4</span>) {</span>
<span id="cb61-44"><a href="#cb61-44" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_fullname"</span>] <span class="ot">&lt;-</span> <span class="st">"[0.2,0.4)"</span></span>
<span id="cb61-45"><a href="#cb61-45" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"nums.length_fullname"</span>] <span class="sc">&lt;</span> <span class="fl">0.6</span>) {</span>
<span id="cb61-46"><a href="#cb61-46" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_fullname"</span>] <span class="ot">&lt;-</span> <span class="st">"[0.4,0.6)"</span></span>
<span id="cb61-47"><a href="#cb61-47" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"nums.length_fullname"</span>] <span class="sc">&lt;</span> <span class="fl">0.8</span>) {</span>
<span id="cb61-48"><a href="#cb61-48" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_fullname"</span>] <span class="ot">&lt;-</span> <span class="st">"[0.6,0.8)"</span></span>
<span id="cb61-49"><a href="#cb61-49" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb61-50"><a href="#cb61-50" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"nums.length_fullname"</span>] <span class="ot">&lt;-</span> <span class="st">"[0.8,1]"</span></span>
<span id="cb61-51"><a href="#cb61-51" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-52"><a href="#cb61-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-53"><a href="#cb61-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Para description_length</span></span>
<span id="cb61-54"><a href="#cb61-54" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datos_testDF[i, <span class="st">"description_length"</span>] <span class="sc">&lt;</span> <span class="dv">5</span>) {</span>
<span id="cb61-55"><a href="#cb61-55" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"description_length"</span>] <span class="ot">&lt;-</span> <span class="st">"[0,5)"</span></span>
<span id="cb61-56"><a href="#cb61-56" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"description_length"</span>] <span class="sc">&lt;</span> <span class="dv">43</span>) {</span>
<span id="cb61-57"><a href="#cb61-57" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"description_length"</span>] <span class="ot">&lt;-</span> <span class="st">"[5,43)"</span></span>
<span id="cb61-58"><a href="#cb61-58" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb61-59"><a href="#cb61-59" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"description_length"</span>] <span class="ot">&lt;-</span> <span class="st">"[43,150]"</span></span>
<span id="cb61-60"><a href="#cb61-60" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-61"><a href="#cb61-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-62"><a href="#cb61-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Para posts</span></span>
<span id="cb61-63"><a href="#cb61-63" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datos_testDF[i, <span class="st">"posts"</span>] <span class="sc">&lt;</span> <span class="dv">1</span>) {</span>
<span id="cb61-64"><a href="#cb61-64" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"posts"</span>] <span class="ot">&lt;-</span> <span class="st">"[0,1)"</span></span>
<span id="cb61-65"><a href="#cb61-65" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"posts"</span>] <span class="sc">&lt;</span> <span class="dv">5</span>) {</span>
<span id="cb61-66"><a href="#cb61-66" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"posts"</span>] <span class="ot">&lt;-</span> <span class="st">"[1,5)"</span></span>
<span id="cb61-67"><a href="#cb61-67" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"posts"</span>] <span class="sc">&lt;</span> <span class="fl">17.6</span>) {</span>
<span id="cb61-68"><a href="#cb61-68" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"posts"</span>] <span class="ot">&lt;-</span> <span class="st">"[5,17.6)"</span></span>
<span id="cb61-69"><a href="#cb61-69" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"posts"</span>] <span class="sc">&lt;</span> <span class="fl">63.7</span>) {</span>
<span id="cb61-70"><a href="#cb61-70" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"posts"</span>] <span class="ot">&lt;-</span> <span class="st">"[17.6,63.7)"</span></span>
<span id="cb61-71"><a href="#cb61-71" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"posts"</span>] <span class="sc">&lt;</span> <span class="dv">187</span>) {</span>
<span id="cb61-72"><a href="#cb61-72" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"posts"</span>] <span class="ot">&lt;-</span> <span class="st">"[63.7,187)"</span></span>
<span id="cb61-73"><a href="#cb61-73" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb61-74"><a href="#cb61-74" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"posts"</span>] <span class="ot">&lt;-</span> <span class="st">"[187,7.39e+03]"</span></span>
<span id="cb61-75"><a href="#cb61-75" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-76"><a href="#cb61-76" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-77"><a href="#cb61-77" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Para followers</span></span>
<span id="cb61-78"><a href="#cb61-78" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datos_testDF[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="fl">10.5</span>) {</span>
<span id="cb61-79"><a href="#cb61-79" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[0,10.5)"</span></span>
<span id="cb61-80"><a href="#cb61-80" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">26</span>) {</span>
<span id="cb61-81"><a href="#cb61-81" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[10.5,26)"</span></span>
<span id="cb61-82"><a href="#cb61-82" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">49</span>) {</span>
<span id="cb61-83"><a href="#cb61-83" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[26,49)"</span></span>
<span id="cb61-84"><a href="#cb61-84" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">78</span>) {</span>
<span id="cb61-85"><a href="#cb61-85" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[49,78)"</span></span>
<span id="cb61-86"><a href="#cb61-86" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">150</span>) {</span>
<span id="cb61-87"><a href="#cb61-87" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[78,150)"</span></span>
<span id="cb61-88"><a href="#cb61-88" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">271</span>) {</span>
<span id="cb61-89"><a href="#cb61-89" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[150,271)"</span></span>
<span id="cb61-90"><a href="#cb61-90" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">496</span>) {</span>
<span id="cb61-91"><a href="#cb61-91" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[271,496)"</span></span>
<span id="cb61-92"><a href="#cb61-92" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">916</span>) {</span>
<span id="cb61-93"><a href="#cb61-93" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[496,916)"</span></span>
<span id="cb61-94"><a href="#cb61-94" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"followers"</span>] <span class="sc">&lt;</span> <span class="dv">2580</span>) {</span>
<span id="cb61-95"><a href="#cb61-95" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[916,2.58e+03)"</span></span>
<span id="cb61-96"><a href="#cb61-96" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb61-97"><a href="#cb61-97" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"followers"</span>] <span class="ot">&lt;-</span> <span class="st">"[2.58e+03,1.53e+07]"</span></span>
<span id="cb61-98"><a href="#cb61-98" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-99"><a href="#cb61-99" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-100"><a href="#cb61-100" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Para follows</span></span>
<span id="cb61-101"><a href="#cb61-101" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (datos_testDF[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="dv">26</span>) {</span>
<span id="cb61-102"><a href="#cb61-102" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"follows"</span>] <span class="ot">&lt;-</span> <span class="st">"[0,26)"</span></span>
<span id="cb61-103"><a href="#cb61-103" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="dv">71</span>) {</span>
<span id="cb61-104"><a href="#cb61-104" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"follows"</span>] <span class="ot">&lt;-</span> <span class="st">"[26,71)"</span></span>
<span id="cb61-105"><a href="#cb61-105" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="dv">159</span>) {</span>
<span id="cb61-106"><a href="#cb61-106" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"follows"</span>] <span class="ot">&lt;-</span> <span class="st">"[71,159)"</span></span>
<span id="cb61-107"><a href="#cb61-107" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="dv">322</span>) {</span>
<span id="cb61-108"><a href="#cb61-108" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"follows"</span>] <span class="ot">&lt;-</span> <span class="st">"[159,322)"</span></span>
<span id="cb61-109"><a href="#cb61-109" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="dv">521</span>) {</span>
<span id="cb61-110"><a href="#cb61-110" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"follows"</span>] <span class="ot">&lt;-</span> <span class="st">"[322,521)"</span></span>
<span id="cb61-111"><a href="#cb61-111" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (datos_testDF[i, <span class="st">"follows"</span>] <span class="sc">&lt;</span> <span class="dv">904</span>) {</span>
<span id="cb61-112"><a href="#cb61-112" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"follows"</span>] <span class="ot">&lt;-</span> <span class="st">"[521,904)"</span></span>
<span id="cb61-113"><a href="#cb61-113" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb61-114"><a href="#cb61-114" aria-hidden="true" tabindex="-1"></a>    datos_testDF[i, <span class="st">"follows"</span>] <span class="ot">&lt;-</span> <span class="st">"[904,7.5e+03]"</span></span>
<span id="cb61-115"><a href="#cb61-115" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb61-116"><a href="#cb61-116" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-117"><a href="#cb61-117" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb61-118"><a href="#cb61-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-119"><a href="#cb61-119" aria-hidden="true" tabindex="-1"></a><span class="co"># Concertir las columnas no binarias (las que ahora tienen intervalos) a tipo factor</span></span>
<span id="cb61-120"><a href="#cb61-120" aria-hidden="true" tabindex="-1"></a>columnas_intervalo <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"nums.length_username"</span>, <span class="st">"fullname_words"</span>, <span class="st">"nums.length_fullname"</span>, <span class="st">"description_length"</span>, <span class="st">"posts"</span>, <span class="st">"followers"</span>, <span class="st">"follows"</span>)</span>
<span id="cb61-121"><a href="#cb61-121" aria-hidden="true" tabindex="-1"></a>datos_testDF[, columnas_intervalo] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(datos_testDF[, columnas_intervalo], factor)</span>
<span id="cb61-122"><a href="#cb61-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-123"><a href="#cb61-123" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir columnas binarias a factor</span></span>
<span id="cb61-124"><a href="#cb61-124" aria-hidden="true" tabindex="-1"></a>columnas_binarias <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb61-125"><a href="#cb61-125" aria-hidden="true" tabindex="-1"></a>datos_testDF[, columnas_binarias] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(datos_testDF[, columnas_binarias], factor)</span>
<span id="cb61-126"><a href="#cb61-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-127"><a href="#cb61-127" aria-hidden="true" tabindex="-1"></a><span class="co"># Ver datos_testDF después de la conversión</span></span>
<span id="cb61-128"><a href="#cb61-128" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_testDF)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  profile_pic nums.length_username fullname_words nums.length_fullname
1           1        [0.184,0.368)          [1,2)            [0.2,0.4)
2           1            [0,0.184)         [2,12]              [0,0.2)
3           1            [0,0.184)         [2,12]              [0,0.2)
4           1            [0,0.184)          [1,2)              [0,0.2)
5           1        [0.368,0.552)          [1,2)              [0,0.2)
6           1            [0,0.184)          [1,2)              [0,0.2)
  name..username description_length external_URL private       posts followers
1              1             [5,43)            0       1 [17.6,63.7) [271,496)
2              0           [43,150]            0       1       [1,5)   [26,49)
3              0           [43,150]            0       1       [1,5)   [26,49)
4              0              [0,5)            0       1       [1,5) [10.5,26)
5              0           [43,150]            0       1 [17.6,63.7) [10.5,26)
6              0              [0,5)            0       1 [17.6,63.7)   [26,49)
    follows
1 [521,904)
2   [26,71)
3   [26,71)
4 [521,904)
5   [26,71)
6   [26,71)</code></pre>
</div>
</div>
<p>Como vemos, todas las variables numéricas han pasado a tener datos de intervalo, y todas las columnas han pasado a ser de tipo factor.</p>
<p>Ahora toca aplicar las reglas a los datos de test, y realizar la predicción:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir datos_test a transacciones</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>Tdatos_test <span class="ot">&lt;-</span> <span class="fu">as</span>(datos_testDF, <span class="st">"transactions"</span>)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una columna vacía para las predicciones</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>datos_testDF<span class="sc">$</span>fake_predict_RA <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar las reglas a cada transacción en datos_test</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(Tdatos_test)) {</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Obtener la transacción de esa fila</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>  trans <span class="ot">&lt;-</span> Tdatos_test[i]</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Evaluar las reglas con el antecedente correspondiente: si el antecedente es subconjunto de la transacción actual, asignar el consecuente de la primera regla que lo cumpla (están ordenadas por confidence) a 'fake_predict_RA'</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>  matches <span class="ot">&lt;-</span> <span class="fu">is.subset</span>(<span class="fu">lhs</span>(reglas_fake_verdaderas), trans)</span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Si alguna regla se cumple, asignar el consecuente correspondiente a 'fake_predict_RA'</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">any</span>(matches)) {</span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Obtener el consecuente de la primera regla que se cumple</span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>    matching_rule <span class="ot">&lt;-</span> reglas_fake_verdaderas[<span class="fu">which</span>(matches)[<span class="dv">1</span>]]</span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>    fake_value <span class="ot">&lt;-</span> <span class="fu">labels</span>(<span class="fu">rhs</span>(matching_rule))[<span class="dv">1</span>]</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Asignar el valor predicho</span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>    datos_testDF<span class="sc">$</span>fake_predict_RA[i] <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">"fake="</span>, <span class="st">""</span>, fake_value)</span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Si ninguna regla cuenta con un antecedente que sea subconjunto de la transacción actual, realizar una heurística (árbol de decisión) con las conclusiones extraídas de las reglas</span></span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Si la cuenta tiene URL externa, es verdadera</span></span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (datos_test<span class="sc">$</span>external_URL[i] <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a>      datos_testDF<span class="sc">$</span>fake_predict_RA[i] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Si la cuenta no tiene foto de perfil, es falsa</span></span>
<span id="cb63-31"><a href="#cb63-31" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (datos_test<span class="sc">$</span>profile_pic[i] <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb63-32"><a href="#cb63-32" aria-hidden="true" tabindex="-1"></a>      datos_testDF<span class="sc">$</span>fake_predict_RA[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb63-33"><a href="#cb63-33" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Si la cuenta tiene menos de 250 seguido, es falsa</span></span>
<span id="cb63-34"><a href="#cb63-34" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (datos_test<span class="sc">$</span>followers[i] <span class="sc">&lt;</span> <span class="dv">250</span>) {</span>
<span id="cb63-35"><a href="#cb63-35" aria-hidden="true" tabindex="-1"></a>      datos_testDF<span class="sc">$</span>fake_predict_RA[i] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb63-36"><a href="#cb63-36" aria-hidden="true" tabindex="-1"></a>      <span class="co"># En otro caso, consideramos que es verdadera</span></span>
<span id="cb63-37"><a href="#cb63-37" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb63-38"><a href="#cb63-38" aria-hidden="true" tabindex="-1"></a>      datos_testDF<span class="sc">$</span>fake_predict_RA[i] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb63-39"><a href="#cb63-39" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb63-40"><a href="#cb63-40" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb63-41"><a href="#cb63-41" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Echemos un vistazo a las primeras filas de datos_testDF para comprobar que la predicción se ha realizado correctamente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar las primeras filas de datos_testDF</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_testDF)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  profile_pic nums.length_username fullname_words nums.length_fullname
1           1        [0.184,0.368)          [1,2)            [0.2,0.4)
2           1            [0,0.184)         [2,12]              [0,0.2)
3           1            [0,0.184)         [2,12]              [0,0.2)
4           1            [0,0.184)          [1,2)              [0,0.2)
5           1        [0.368,0.552)          [1,2)              [0,0.2)
6           1            [0,0.184)          [1,2)              [0,0.2)
  name..username description_length external_URL private       posts followers
1              1             [5,43)            0       1 [17.6,63.7) [271,496)
2              0           [43,150]            0       1       [1,5)   [26,49)
3              0           [43,150]            0       1       [1,5)   [26,49)
4              0              [0,5)            0       1       [1,5) [10.5,26)
5              0           [43,150]            0       1 [17.6,63.7) [10.5,26)
6              0              [0,5)            0       1 [17.6,63.7)   [26,49)
    follows fake_predict_RA
1 [521,904)             {1}
2   [26,71)             {0}
3   [26,71)             {0}
4 [521,904)             {0}
5   [26,71)             {1}
6   [26,71)             {1}</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">#View(datos_testDF)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Vemos que hay predicciones en la columna fake_predict_RA, aunque muchas de ellas (haciendo el View) contienen caracteres ‘{’ y ‘}’. Deshagámonos de ellos y convirtamos la columna a numérica para poder compararla con la columna fake original:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir datos_testDF$fake_predict_RA para eliminar los caracteres '{' y '}'</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>datos_testDF<span class="sc">$</span>fake_predict_RA <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">{|</span><span class="sc">\\</span><span class="st">}"</span>, <span class="st">""</span>, datos_testDF<span class="sc">$</span>fake_predict_RA)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir datos_testDF$fake_predict_RA a numérico</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>datos_testDF<span class="sc">$</span>fake_predict_RA <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(datos_testDF<span class="sc">$</span>fake_predict_RA)</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar las primeras filas de datos_testDF</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datos_testDF)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  profile_pic nums.length_username fullname_words nums.length_fullname
1           1        [0.184,0.368)          [1,2)            [0.2,0.4)
2           1            [0,0.184)         [2,12]              [0,0.2)
3           1            [0,0.184)         [2,12]              [0,0.2)
4           1            [0,0.184)          [1,2)              [0,0.2)
5           1        [0.368,0.552)          [1,2)              [0,0.2)
6           1            [0,0.184)          [1,2)              [0,0.2)
  name..username description_length external_URL private       posts followers
1              1             [5,43)            0       1 [17.6,63.7) [271,496)
2              0           [43,150]            0       1       [1,5)   [26,49)
3              0           [43,150]            0       1       [1,5)   [26,49)
4              0              [0,5)            0       1       [1,5) [10.5,26)
5              0           [43,150]            0       1 [17.6,63.7) [10.5,26)
6              0              [0,5)            0       1 [17.6,63.7)   [26,49)
    follows fake_predict_RA
1 [521,904)               1
2   [26,71)               0
3   [26,71)               0
4 [521,904)               0
5   [26,71)               1
6   [26,71)               1</code></pre>
</div>
</div>
<p>Misión cumplida. Ahora, revisemos si hay valores NA en esa columna:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contar los valores NA de la columna fake_predict_RA</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"fake_predict_RA tiene "</span>, <span class="fu">sum</span>(<span class="fu">is.na</span>(datos_testDF<span class="sc">$</span>fake_predict_RA)), <span class="st">" valores NA."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>fake_predict_RA tiene  0  valores NA.</code></pre>
</div>
</div>
<p>Parece que todo va bien. Creemos un nuevo dataset únicamente formado por las predicciones y el valor real de falsedad:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>datos_test_predicciones <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">fake =</span> fake_originales, <span class="at">fake_predict_RA =</span> datos_testDF<span class="sc">$</span>fake_predict_RA)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(datos_test_predicciones)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar el data frame en un archivo CSV</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(datos_test_predicciones, <span class="st">"datos_test_predicciones.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Es momento de calcular el porcentaje de éxito en la predicción de cuentas falsas, verdaderas y en general:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Contar el número de predicciones correctas cuando la cuenta es falsa</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>predicciones_correctas_falsas <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake_predict_RA <span class="sc">==</span> datos_test_predicciones<span class="sc">$</span>fake <span class="sc">&amp;</span> datos_test_predicciones<span class="sc">$</span>fake <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el porcentaje de éxito en la predicción de cuentas falsas</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>total_falsas <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>porcentaje_exito_falsas <span class="ot">&lt;-</span> (predicciones_correctas_falsas <span class="sc">/</span> total_falsas) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Contar el número de predicciones correctas cuando la cuenta es verdadera</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>predicciones_correctas_verdaderas <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake_predict_RA <span class="sc">==</span> datos_test_predicciones<span class="sc">$</span>fake <span class="sc">&amp;</span> datos_test_predicciones<span class="sc">$</span>fake <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el porcentaje de éxito en la predicción de cuentas verdaderas</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>total_verdaderas <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>porcentaje_exito_verdaderas <span class="ot">&lt;-</span> (predicciones_correctas_verdaderas <span class="sc">/</span> total_verdaderas) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Contar el número de predicciones correctas generales</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>predicciones_correctas <span class="ot">&lt;-</span> <span class="fu">sum</span>(datos_test_predicciones<span class="sc">$</span>fake_predict_RA <span class="sc">==</span> datos_test_predicciones<span class="sc">$</span>fake)</span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el porcentaje de éxito general</span></span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a>total_predicciones <span class="ot">&lt;-</span> <span class="fu">nrow</span>(datos_test_predicciones)</span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a>porcentaje_exito_general <span class="ot">&lt;-</span> (predicciones_correctas <span class="sc">/</span> total_predicciones) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Imprimir el resultado</span></span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"El porcentaje de éxito en la predicción de cuentas falsas es:"</span>, porcentaje_exito_falsas, <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"El porcentaje de éxito en la predicción de cuentas verdaderas es:"</span>, porcentaje_exito_verdaderas, <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"El porcentaje de éxito general en la predicción de cuentas es:"</span>, porcentaje_exito_general, <span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>El porcentaje de éxito en la predicción de cuentas falsas es: 83.33333 %
 El porcentaje de éxito en la predicción de cuentas verdaderas es: 75 %
 El porcentaje de éxito general en la predicción de cuentas es: 79.16667 %</code></pre>
</div>
</div>
<p>Como vemos, los porcentajes de éxito de predicción de la veracidad de la cuenta basados en las reglas de asociación son altos. Podrían mejorarse (especialmente el porcentaje para cuentas verdaderas), pero es un resultado satisfactorio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear dataset con los porcentajes</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>exito_predicciones <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">tipo =</span> <span class="fu">c</span>(<span class="st">"Reglas de Asociación"</span>), <span class="st">'Éxito_cuentas_falsas'</span> <span class="ot">=</span> <span class="fu">c</span>(porcentaje_exito_falsas), <span class="st">'Éxito_cuentas_verdaderas'</span> <span class="ot">=</span> <span class="fu">c</span>(porcentaje_exito_verdaderas), <span class="st">'Éxito_general'</span> <span class="ot">=</span> <span class="fu">c</span>(porcentaje_exito_general))</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>exito_predicciones</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  tipo Éxito_cuentas_falsas Éxito_cuentas_verdaderas
1 Reglas de Asociación             83.33333                       75
  Éxito_general
1      79.16667</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar el data frame en un archivo CSV</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(exito_predicciones, <span class="st">"exito_predicciones.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="qué-patrones-encontramos-conociendo-la-veracidad-o-falsedad-de-la-cuenta" class="level3" data-number="3.1.4">
<h3 data-number="3.1.4" class="anchored" data-anchor-id="qué-patrones-encontramos-conociendo-la-veracidad-o-falsedad-de-la-cuenta"><span class="header-section-number">3.1.4</span> ¿Qué patrones encontramos conociendo la veracidad o falsedad de la cuenta?</h3>
<p>En cuanto al objetivo del proyecto, nos importa más el apartado anterior (averiguar las causas que provocan que una cuenta sea verdadera o falsa para poder identificar cuentas falsas según sus parámetros), pero también resulta interesante, al menos, ver las reglas en sentido contrario, es decir, sabiendo que una cuenta es verdadera o falsa, ¿qué valores toman los demás atributos?</p>
<p>No me detendré a hacer un análisis profundo de este apartado, pero encontremos y observemos las reglas resultantes, comenzando con cuentas falsas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>reglas_fake_lhs <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"fake=1"</span>)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas_fake_lhs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_fake_lhs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                      rhs                          support confidence  coverage     lift count
[1]  {fake=1}                              =&gt; {external_URL=0}           0.5000000  1.0000000 0.5000000 1.131631   288
[2]  {profile_pic=0,                                                                                                  
      fullname_words=[1,2),                                                                                           
      nums.length_fullname=[0,0.2),                                                                                   
      fake=1}                              =&gt; {description_length=[0,5)} 0.1805556  0.9904762 0.1822917 1.648885   104
[3]  {profile_pic=0,                                                                                                  
      fullname_words=[1,2),                                                                                           
      name..username=0,                                                                                               
      fake=1}                              =&gt; {description_length=[0,5)} 0.1996528  0.9829060 0.2031250 1.636283   115
[4]  {fullname_words=[1,2),                                                                                           
      name..username=0,                                                                                               
      posts=[0,1),                                                                                                    
      fake=1}                              =&gt; {description_length=[0,5)} 0.1701389  0.9800000 0.1736111 1.631445    98
[5]  {profile_pic=0,                                                                                                  
      nums.length_fullname=[0,0.2),                                                                                   
      fake=1}                              =&gt; {description_length=[0,5)} 0.2465278  0.9793103 0.2517361 1.630297   142
[6]  {profile_pic=0,                                                                                                  
      name..username=0,                                                                                               
      fake=1}                              =&gt; {description_length=[0,5)} 0.2673611  0.9746835 0.2743056 1.622595   154
[7]  {fullname_words=[1,2),                                                                                           
      posts=[0,1),                                                                                                    
      fake=1}                              =&gt; {description_length=[0,5)} 0.1875000  0.9729730 0.1927083 1.619747   108
[8]  {name..username=0,                                                                                               
      posts=[0,1),                                                                                                    
      fake=1}                              =&gt; {description_length=[0,5)} 0.2395833  0.9718310 0.2465278 1.617846   138
[9]  {profile_pic=0,                                                                                                  
      fullname_words=[1,2),                                                                                           
      fake=1}                              =&gt; {description_length=[0,5)} 0.2170139  0.9689922 0.2239583 1.613120   125
[10] {posts=[0,1),                                                                                                    
      fake=1}                              =&gt; {description_length=[0,5)} 0.2569444  0.9673203 0.2656250 1.610337   148
[11] {profile_pic=0,                                                                                                  
      fake=1}                              =&gt; {description_length=[0,5)} 0.2847222  0.9647059 0.2951389 1.605984   164
[12] {name..username=0,                                                                                               
      follows=[0,26),                                                                                                 
      fake=1}                              =&gt; {description_length=[0,5)} 0.1076389  0.9538462 0.1128472 1.587906    62
[13] {nums.length_username=[0.368,0.552),                                                                             
      fake=1}                              =&gt; {description_length=[0,5)} 0.1163194  0.9436620 0.1232639 1.570952    67
[14] {follows=[0,26),                                                                                                 
      fake=1}                              =&gt; {description_length=[0,5)} 0.1145833  0.9428571 0.1215278 1.569612    66
[15] {fullname_words=[1,2),                                                                                           
      nums.length_fullname=[0,0.2),                                                                                   
      private=0,                                                                                                      
      fake=1}                              =&gt; {description_length=[0,5)} 0.1649306  0.9134615 0.1805556 1.520676    95
[16] {fullname_words=[1,2),                                                                                           
      nums.length_fullname=[0,0.2),                                                                                   
      name..username=0,                                                                                               
      fake=1}                              =&gt; {description_length=[0,5)} 0.2517361  0.9119497 0.2760417 1.518159   145
[17] {fullname_words=[1,2),                                                                                           
      nums.length_fullname=[0,0.2),                                                                                   
      fake=1}                              =&gt; {description_length=[0,5)} 0.2604167  0.9090909 0.2864583 1.513400   150
[18] {nums.length_fullname=[0,0.2),                                                                                   
      private=0,                                                                                                      
      fake=1}                              =&gt; {description_length=[0,5)} 0.2430556  0.9090909 0.2673611 1.513400   140
[19] {fullname_words=[1,2),                                                                                           
      name..username=0,                                                                                               
      private=0,                                                                                                      
      fake=1}                              =&gt; {description_length=[0,5)} 0.1892361  0.9083333 0.2083333 1.512139   109
[20] {fullname_words=[1,2),                                                                                           
      private=0,                                                                                                      
      fake=1}                              =&gt; {description_length=[0,5)} 0.2048611  0.9076923 0.2256944 1.511072   118
[21] {name..username=0,                                                                                               
      private=0,                                                                                                      
      fake=1}                              =&gt; {description_length=[0,5)} 0.2708333  0.9069767 0.2986111 1.509880   156
[22] {private=0,                                                                                                      
      fake=1}                              =&gt; {description_length=[0,5)} 0.2864583  0.9065934 0.3159722 1.509242   165
[23] {fullname_words=[1,2),                                                                                           
      name..username=0,                                                                                               
      fake=1}                              =&gt; {description_length=[0,5)} 0.2968750  0.9047619 0.3281250 1.506193   171</code></pre>
</div>
</div>
<p>Destaca la repetida aparición de valores bajos de longitud de la descripción en el consecuente, cuando se combina la falsedad de la cuenta con otros atributos en el antecedente. No extraemos mucha información nueva.</p>
<p>Veamos estas reglas para cuentas verdaderas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>reglas_verdaderas_lhs <span class="ot">&lt;-</span> <span class="fu">subset</span>(reglas, <span class="at">subset =</span> lhs <span class="sc">%in%</span> <span class="st">"fake=0"</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(reglas_verdaderas_lhs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inspect</span>(reglas_verdaderas_lhs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lhs                                  rhs                                support confidence  coverage     lift count
[1]  {posts=[17.6,63.7),                                                                                                
      fake=0}                          =&gt; {profile_pic=1}                  0.1059028  1.0000000 0.1059028 1.425743    61
[2]  {posts=[17.6,63.7),                                                                                                
      fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.1059028  1.0000000 0.1059028 1.095057    61
[3]  {follows=[521,904),                                                                                                
      fake=0}                          =&gt; {profile_pic=1}                  0.1059028  1.0000000 0.1059028 1.425743    61
[4]  {description_length=[5,43),                                                                                        
      fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.1562500  1.0000000 0.1562500 1.095057    90
[5]  {description_length=[43,150],                                                                                      
      fake=0}                          =&gt; {profile_pic=1}                  0.1857639  1.0000000 0.1857639 1.425743   107
[6]  {fullname_words=[2,12],                                                                                            
      fake=0}                          =&gt; {profile_pic=1}                  0.3177083  1.0000000 0.3177083 1.425743   183
[7]  {description_length=[0,5),                                                                                         
      fake=0}                          =&gt; {profile_pic=1}                  0.1579861  1.0000000 0.1579861 1.425743    91
[8]  {private=0,                                                                                                        
      fake=0}                          =&gt; {profile_pic=1}                  0.3020833  1.0000000 0.3020833 1.425743   174
[9]  {private=0,                                                                                                        
      fake=0}                          =&gt; {name..username=0}               0.3020833  1.0000000 0.3020833 1.035971   174
[10] {external_URL=0,                                                                                                   
      fake=0}                          =&gt; {name..username=0}               0.3836806  1.0000000 0.3836806 1.035971   221
[11] {fullname_words=[2,12],                                                                                            
      private=0,                                                                                                        
      fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.1996528  1.0000000 0.1996528 1.095057   115
[12] {nums.length_username=[0,0.184),                                                                                   
      description_length=[0,5),                                                                                         
      fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.1423611  1.0000000 0.1423611 1.095057    82
[13] {fake=0}                          =&gt; {name..username=0}               0.4982639  0.9965278 0.5000000 1.032374   287
[14] {fullname_words=[2,12],                                                                                            
      fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.3159722  0.9945355 0.3177083 1.089073   182
[15] {fake=0}                          =&gt; {profile_pic=1}                  0.4965278  0.9930556 0.5000000 1.415842   286
[16] {nums.length_username=[0,0.184),                                                                                   
      fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.4548611  0.9924242 0.4583333 1.086761   262
[17] {private=1,                                                                                                        
      fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.1961806  0.9912281 0.1979167 1.085451   113
[18] {description_length=[0,5),                                                                                         
      fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.1562500  0.9890110 0.1579861 1.083023    90
[19] {external_URL=0,                                                                                                   
      fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.3784722  0.9864253 0.3836806 1.080192   218
[20] {fake=0}                          =&gt; {nums.length_fullname=[0,0.2)}   0.4930556  0.9861111 0.5000000 1.079848   284
[21] {posts=[63.7,187),                                                                                                 
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1215278  0.9722222 0.1250000 1.551247    70
[22] {fullname_words=[2,12],                                                                                            
      private=1,                                                                                                        
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1145833  0.9705882 0.1180556 1.548639    66
[23] {follows=[521,904),                                                                                                
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1006944  0.9508197 0.1059028 1.517097    58
[24] {nums.length_fullname=[0,0.2),                                                                                     
      posts=[187,7.39e+03],                                                                                             
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1336806  0.9506173 0.1406250 1.516774    77
[25] {posts=[187,7.39e+03],                                                                                             
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1336806  0.9390244 0.1423611 1.498277    77
[26] {fullname_words=[2,12],                                                                                            
      description_length=[43,150],                                                                                      
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1267361  0.9358974 0.1354167 1.493288    73
[27] {fullname_words=[2,12],                                                                                            
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.2968750  0.9344262 0.3177083 1.490940   171
[28] {nums.length_fullname=[0,0.2),                                                                                     
      description_length=[43,150],                                                                                      
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1684028  0.9326923 0.1805556 1.488174    97
[29] {private=1,                                                                                                        
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1840278  0.9298246 0.1979167 1.483598   106
[30] {description_length=[43,150],                                                                                      
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1718750  0.9252336 0.1857639 1.476273    99
[31] {nums.length_fullname=[0,0.2),                                                                                     
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.4548611  0.9225352 0.4930556 1.471968   262
[32] {description_length=[5,43),                                                                                        
      fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.1440972  0.9222222 0.1562500 1.471468    83
[33] {fake=0}                          =&gt; {nums.length_username=[0,0.184)} 0.4583333  0.9166667 0.5000000 1.462604   264</code></pre>
</div>
</div>
<p>Destaca la repetida aparición en los consecuentes de la presencia de foto de perfil, la ausencia de coincidencia de nombre completo y nombre de usuario y el primer intervalo de valores de los ratios de números en la longitud del username y del fullname.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./visualizacion.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Visualización</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./fca.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Formal Concept Analysis</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>